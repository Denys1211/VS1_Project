<template name="customerscard">
  <style>
    .results tr[visible='false'],
    .no-result {
      display: none;
    }

    .results tr[visible='true'] {
      display: table-row;
    }

    .counter {
      padding: 8px;
      color: #ccc;
    }

    .sideSearch {
      /*width: 200px;*/
      overflow-x: hidden;
      overflow-y: hidden;
    }

    .cardB {
      /* max-height: 700px; */
      overflow-y: auto;
    }

    .cardB420 {
      max-height: 300px;
      overflow-y: auto;
    }

    .rowB {
      overflow-x: auto;
    }

    .nav-tabs .nav-link.active {
      color: rgb(0, 163, 211) !important;
      background-color: #EDEDED !important;
      border-color: #00a3d3 #00a3d3 #ededed #00a3d3 !important;
    }

    .nav-tabs .nav-link {
      background-color: #fff !important;
      border-color: #00a3d3 !important;
    }

    @media only screen and (max-width: 600px) {
      .sideSearch {
        width: auto;
      }
    }

    #btnView {
      display: none;
    }

    @media screen and (min-width: 1025px) {
      .viewList {
        display: none;
      }

      .displayList {
        height: 115vh;
      }

      .customerCardParent {
        height: 100%;
      }
    }

    .currentSelect {
      background-color: #ededed99;
      color: #00a3d3;
    }

    @media screen and (max-width: 450px) {
      .sideSearch {
        height: 400px !important;
        overflow-y: scroll;
      }
    }
  </style>
  <div>
    <div class="fullScreenSpin" style="display:none;">
      <div class="spinner"></div>
    </div>
    {{#if record}}
    <div style="margin: 16px;">
      {{#unless isModal}}
      <div class="row">
        <div class="col-12 col-md-4">
          <h2 class="text-dark mb-0">Customer Overview Dashboard
            {{> helpbutton}}
          </h2>
        </div>
        <div class="col-12 col-md-4">{{> loggedcompanyoverview}}</div>
      </div>
      {{/unless}}
      <div class="row">
        {{#unless isModal}}
        <div class="col-12 col-md-4 col-lg-2 displayList" id="displayList">
          <div class="card shadow mb-4 customerCardParent" style="margin: 8px;">
            <div class="card-header d-flex justify-content-between align-items-center">
              <h6 class="text-primary font-weight-bold m-0">Customers</h6>
              <div class="dropdown no-arrow">
                <button
                  class="btn btn-link dropdown-toggle"
                  data-toggle="dropdown"
                  aria-expanded="false"
                  type="button">
                  <i class="fas fa-ellipsis-v text-gray-400"></i>
                </button>
                <div class="dropdown-menu shadow dropdown-menu-right animated--fade-in" role="menu">
                  <p class="text-center dropdown-header">Customer List</p>
                  <a class="dropdown-item btnNewCustomer" role="presentation" href="#">
                    &nbsp;+ New Customer
                  </a>
                </div>
              </div>
            </div>
            <div class="card-body text-nowrap cardB customerListCard" id="customerListCard">
              <div class="sideSearch">
                <div class="row">
                  <div class="col-12" style="display: inline-flex;">
                    <input
                      type="text"
                      class="search form-control txtSearchCustomers"
                      placeholder="Search..."
                      style="width: 80%;">
                    <button
                      class="btn btn-primary btnRefreshCustomers"
                      type="button"
                      id="btnRefreshCustomers"
                      style="padding: 4px 10px; font-size: 16px; margin-left: 12px !important;"
                      autocomplete="off">
                      <i class="fas fa-search-plus"></i>
                    </button>
                  </div>
                  <div class="col-12">
                    <span class="pull-right">{{customerrecords.length}} items</span>
                  </div>
                  <div class="col-12">
                    <table id="tblCustomerSideList" name="tblCustomerSideList"
                      class="table table-hover table-bordered results tblCustomerSideList">
                      <thead>
                        <tr>
                          <th>Customer</th>
                        </tr>
                        <tr class="warning no-result">
                          <td colspan="4"><i class="fa fa-warning"></i> No result</td>
                        </tr>
                      </thead>
                      <tbody>
                        {{#if customerrecords}}
                        {{#each item in customerrecords}}
                        <tr id="{{item.id}}" class="{{item.isslectJob}}" style="cursor: pointer;">
                          <td data-toggle="tooltip" data-bs-tooltip="" data-placement="bottom" title="{{item.company}}"
                            id="{{item.id}}" class="{{item.isslectJob}} {{item.classname}}">{{item.company}}
                          </td>
                        </tr>
                        {{/each}}
                        {{/if}}
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        {{/unless}}
        <div class="{{#if isModal}}{{else}}col-12 col-md-8 col-lg-10 displayInfo{{/if}}" id="displayInfo"
          style="padding-top: 8px; width: 100%;">
          <!-- All Cards List -->
          {{#if isModal}}

          {{else}}
          {{> editCardChartButtons}}
          {{> allCardsLists tabGroupID="9" chartGroup="PaymentOverviewCustomer"}}
          {{/if}}
          <div class="card shadow mb-4 cardSizing">
            {{> vs1_contact_card_header isJob=isJob record=record id="customerInfo"}}
            {{> customfieldDroppop}}
            {{> customfieldpop}}
            <div class="card-body text-nowrap">
              <div>
                <ul class="nav nav-tabs nav-fill">
                  {{# if isJob}}
                  <li class="nav-item" style="cursor: pointer;">
                    <a class="nav-link mainTab jobTab active" role="tab" data-toggle="tab" data-target="#tab-Job" data-id="tab-job">
                      Job Details
                    </a>
                  </li>
                  {{else}}
                  <li class="nav-item" style="cursor: pointer;">
                    <a class="nav-link mainTab customerTab active" role="tab" data-toggle="tab" data-target="#tab-2" data-id="tab-2">
                      Customer Details
                    </a>
                  </li>
                  <li class="nav-item" style="cursor: pointer;">
                    <a class="nav-link mainTab jobTab" role="tab" data-toggle="tab" data-target="#tab-3" data-id="tab-3">
                      Job Details
                    </a>
                  </li>
                  {{/if}}
                  <li class="nav-item" style="cursor: pointer;">
                    <a class="nav-link mainTab transactionTab" role="tab" data-toggle="tab" data-target="#tab-1" data-id="tab-1">
                      Transaction List
                    </a>
                  </li>
                </ul>
                <div class="tab-content">
                  <style>
                    .table-responsive {
                      overflow-x: auto;
                    }
                    @media only screen and (max-width: 1920px) {
                      .tab-1 {
                        width: 100%;
                      }
                      .tab-2 {
                        width: 100%;
                      }
                      .tab-3 {
                        width: 100%;
                      }
                    }

                    @media only screen and (max-width: 1600px) {
                      .tab-1 {
                        width: 100%;
                      }
                      .tab-2 {
                        width: 100%;
                      }
                      .tab-3 {
                        width: 100%;
                      }
                    }

                    @media only screen and (max-width: 1536px) {
                      .tab-1 {
                        width: 100%;
                      }
                      .tab-2 {
                        width: 100%;
                      }
                      .tab-3 {
                        width: 100%;
                      }
                    }

                    @media only screen and (max-width: 1367px) {
                      .tab-1 {
                        width: 100%;
                      }
                      .tab-2 {
                        width: 100%;
                      }
                      .tab-3 {
                        width: 100%;
                      }
                    }
                  </style>
                  <!-- start Job -->
                  {{# if isJob}}
                  <div class="tab-pane active border rounded-0 tab-Job jobTabEdit" role="tabpanel" id="tab-Job"
                    style="background-color: #ededed; border-color: #ededed #00a3d3 #00a3d3 #00a3d3 !important;">
                    {{#if equals currentTab 'tab-job'}}
                    <div class="row d-xl-flex flex-column justify-content-xl-center" style="margin: 12px;">
                      <div class="col">
                        <div class="row">
                          <div class="col-12 col-md-6" style="padding: 0;">
                            <div class="form-group" style="margin: 4px;">
                              <label>Company Name</label>
                              <input
                                type="text"
                                class="form-control"
                                id="edtJobCustomerCompany"
                                name="edtJobCustomerCompany"
                                value="{{record.jobcompany}}"
                                readonly>
                              <input
                                type="hidden"
                                class="form-control"
                                id="edtParentJobCustomerCompany"
                                name="edtParentCustomerCompany"
                                value="{{record.jobCompanyParent}}">
                            </div>
                          </div>
                          <div class="col-12 col-md-6" style="padding: 0;">
                            <div class="form-group" style="margin: 4px;">
                              <label>Email</label>
                              <input
                                type="text"
                                class="form-control"
                                id="edtJobCustomerEmail"
                                name="edtJobCustomerEmail"
                                value="{{record.jobemail}}">
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-6 col-md-1" style="padding: 0;">
                            <div class="form-group" style="margin: 4px;"><label class="text-nowrap">Title</label>
                              <input
                                type="text"
                                class="form-control"
                                id="edtJobTitle"
                                name="edtJobTitle"
                                value="{{record.jobtitle}}">
                            </div>
                          </div>
                          <div class="col-6 col-md-4" style="padding: 0;">
                            <div class="form-group flex-grow-1" style="margin: 4px;">
                              <label class="text-nowrap">
                                First Name
                              </label>
                              <input
                                type="text"
                                class="form-control"
                                id="edtJobFirstName"
                                name="edtJobFirstName"
                                value="{{record.jobfirstname}}">
                            </div>
                          </div>
                          <div class="col-6 col-md-3" style="padding: 0;">
                            <div class="form-group flex-grow-1" style="margin: 4px;">
                              <label class="text-nowrap">Middle Name</label>
                              <input
                                type="text"
                                class="form-control"
                                id="edtJobMiddleName"
                                name="edtJobMiddleName"
                                value="{{record.jobmiddlename}}">
                            </div>
                          </div>
                          <div class="col-6 col-md-4" style="padding: 0;">
                            <div class="form-group flex-grow-1" style="margin: 4px;">
                              <label class="text-nowrap">Last Name</label>
                              <input
                                type="text"
                                class="form-control"
                                id="edtJobLastName"
                                name="edtJobLastName"
                                value="{{record.joblastname}}">
                            </div>
                          </div>
                        </div>

                        <div class="row">
                          <div class="col-8 col-md-8" style="padding: 0;">
                            <div class="form-group flex-grow-1" style="margin: 4px;">
                              <label class="text-nowrap">Job Name</label>
                              <input
                                type="text"
                                class="form-control"
                                id="edtJobName"
                                name="edtJobName"
                                value="{{record.jobName}}"
                                readonly>
                            </div>
                          </div>
                          <div class="col-4 col-md-4" style="padding: 0;">
                            <div class="form-group flex-grow-1" style="margin: 4px;">
                              <label class="text-nowrap">Job Number</label>
                              <input
                                type="text"
                                class="form-control"
                                id="edtJobNumber"
                                name="edtJobNumber"
                                value="{{record.jobNumber}}">
                            </div>
                          </div>
                        </div>

                        <div class="row">
                          <div class="col-6 col-md-4" style="padding: 0;">
                            <div class="form-group flex-grow-1" style="margin: 4px;"><label
                                class="text-nowrap">Phone</label><input type="text" class="form-control"
                                id="edtJobCustomerPhone" name="edtJobCustomerPhone" value="{{record.jobphone}}">
                            </div>
                          </div>
                          <div class="col-6 col-md-4" style="padding: 0;">
                            <div class="form-group flex-grow-1" style="margin: 4px;"><label
                                class="text-nowrap">Mobile</label><input type="text" class="form-control"
                                id="edtJobCustomerMobile" name="edtJobCustomerMobile" value="{{record.jobmobile}}">
                            </div>
                          </div>
                          <div class="col-6 col-md-4" style="padding: 0;">
                            <div class="form-group flex-grow-1" style="margin: 4px;"><label
                                class="text-nowrap">Fax</label><input type="text" class="form-control"
                                id="edtJobCustomerFax" name="edtJobCustomerFax" value="{{record.jobfax}}">
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-6 col-md-4" style="padding: 0;">
                            <div class="form-group flex-grow-1" style="margin: 4px;"><label class="text-nowrap">Skype
                                ID</label><input type="text" class="form-control" id="edtJobCustomerSkypeID"
                                name="edtJobCustomerSkypeID" value="{{record.jobskype}}">
                            </div>
                          </div>
                          <div class="col-6 col-md-4" style="padding: 0;">
                            <div class="form-group flex-grow-1" style="margin: 4px;"><label
                                class="text-nowrap">Website</label><input type="text" class="form-control"
                                id="edtJobCustomerWebsite" name="edtJobCustomerWebsite" value="{{record.jobwebsite}}">
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col" style="padding: 4px;margin-top: 16px;">
                        <div>
                          <ul class="nav nav-tabs nav-justified">
                            <li class="nav-item" style="cursor: pointer;"><a class="nav-link crmTab active" role="tab"
                                data-toggle="tab" data-target="#tab-crm-job">CRM</a></li>
                            <li class="nav-item"><a class="nav-link" role="tab" data-toggle="tab"
                                data-target="#tab-Job4">Address</a>
                            </li>
                            <li class="nav-item"><a class="nav-link" role="tab" data-toggle="tab"
                                data-target="#tab-Job5">Notes</a></li>
                            <li class="nav-item"><a class="nav-link" role="tab" data-toggle="tab"
                                data-target="#tab-Job6">Invoicing</a>
                            </li>
                            <li class="nav-item attachmentTabJobNoPOP"><a class="nav-link" role="tab" data-toggle="tab"
                                data-target="#tab-Job8">{{#if
                                attachmentCountJobNoPOP}}<span
                                  id="attachment-count">{{attachmentCountJobNoPOP}}</span>{{/if}}
                                Attachments</a></li>
                            <li class="nav-item"><a class="nav-link" role="tab" data-toggle="tab"
                                data-target="#tab-Job10">Tax</a></li>
                          </ul>

                          <div class="tab-content">
                            <div class="tab-pane border rounded-0 tab-crm active" role="tabpanel" id="tab-crm-job"
                              style="border-color: #ededed #00a3d3 #00a3d3 #00a3d3 !important;padding: 20px;">
                                <div class="col d-xl-flex justify-content-xl-end align-items-xl-start">
                                    {{> export_import_print_display_button Import="hiddenButton" tablename="tblCustomerCrmListWithDate"}}
                                </div>
<!--                              {{> non_transactional_list tablename="tblCustomerCrmListWithDate"}}-->
                                {{>datatablelist
                                        tablename="tblCustomerCrmListWithDate"
                                        tableclass="tblCustomerCrmListWithDate"
                                        apiName= apiFunction
                                        indexeddbname = 'TCRMCustomerTaskList'
                                        tableheaderrecords = tableheaderrecords
                                        exportfilename = 'Customer CRM List'
                                        istransaction = true
                                        apiParams= apiParams
                                        datahandler = datahandler
                                        service=service
                                        lowercaseDataName='tprojecttaskslist'
                                        exIndexDBName = 'tprojecttaskslist'
                                        exdatahandler = exDataHandler
                                        searchAPI = searchAPI
                                        showPlusButtonCRM = true
                                }}
                            </div>
                            <div class="tab-pane border rounded-0 tab-Job4" role="tabpanel" id="tab-Job4"
                              style="border-color: #ededed #00a3d3 #00a3d3 #00a3d3 !important;overflow: auto;">
                              <div class="row" style="margin: 4px 12px;">
                                <div class="col-12" style="padding: 0;">
                                  <h4 style="margin: 4px;">Shipping Address</h4>
                                </div>
                              </div>
                              <div class="row" style="margin: 4px 12px;">
                                <div class="col-12 col-md-6" style="padding: 0;">
                                  <div class="form-group" style="margin: 4px;">
                                    <label>Street Address</label><textarea class="form-control" style="height: 116px;"
                                      rows="4" id="edtJobCustomerShippingAddress" name="edtJobCustomerShippingAddress"
                                      value="{{record.jobshippingaddress}}"></textarea>
                                  </div>
                                </div>
                                <div class="col-12 col-md-6">
                                  <div class="row">
                                    <div class="col-6" style="padding: 0;">
                                      <div class="form-group" style="margin: 4px;"><label>City /
                                          Town</label><input type="text" class="form-control"
                                          id="edtJobCustomerShippingCity" name="edtJobCustomerShippingCity"
                                          value="{{record.jobscity}}"></div>
                                    </div>
                                    <div class="col-6" style="padding: 0;">
                                      <div class="form-group" style="margin: 4px;"><label>State /
                                          Region</label><input type="text" class="form-control"
                                          id="edtJobCustomerShippingState" name="edtJobCustomerShippingState"
                                          value="{{record.jobsstate}}"></div>
                                    </div>
                                    <div class="col-6" style="padding: 0;">
                                      <div class="form-group" style="margin: 4px;"><label>ZIP
                                          Code</label><input type="text" class="form-control"
                                          id="edtJobCustomerShippingZIP" name="edtJobCustomerShippingZIP"
                                          value="{{record.jobspostalcode}}">
                                      </div>
                                    </div>
                                    <div class="col-6" style="padding: 0;">
                                      <div class="form-group" style="margin: 4px;">
                                        <label>Country</label><select class="form-control" id="sedtJobCountry"
                                          name="sedtJobCountry">
                                          {{#each item in countryList}}
                                          {{#if equals item record.jobscountry
                                          }}
                                          <option value="{{record.jobscountry}}" selected="">
                                            {{record.jobscountry}}
                                          </option>
                                          {{else}}
                                          <option value="{{item}}">{{item}}
                                          </option>
                                          {{/if}}
                                          {{/each}}
                                        </select>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="row no-gutters flex-column" style="margin: 12px;">
                                <style>
                                  .jobbillingaddress {
                                    display: none;
                                  }
                                </style>
                                <script>
                                  function myFunctionJob() {
                                    const checkBoxJob = document.getElementById("chkJobSameAsShipping2");
                                    const billingAddressJob = document.getElementById("jobbillingaddress");
                                    if (checkBoxJob.checked === true) {
                                      billingAddressJob.style.display = "none";
                                    } else {
                                      billingAddressJob.style.display = "flex";
                                    }
                                  }
                                </script>
                                <div class="col">
                                  <div class="row no-gutters" style="margin-top: 12px;">
                                    <div class="col d-xl-flex align-items-start" style="padding: 0;">
                                      <h4 class="flex-grow" style="margin: 4px;">
                                        Billing Address</h4>
                                      <div class="custom-control custom-switch chkJobaddress" style="margin: 8px;">
                                        <input class="custom-control-input" type="checkbox" id="chkJobSameAsShipping2"
                                          onclick="myFunctionJob()" checked><label class="custom-control-label"
                                          for="chkJobSameAsShipping2">Same as
                                          Shipping</label>
                                      </div>
                                    </div>
                                    {{#if equals isJobSameAddress true}}
                                    <script>
                                      $('#chkJobSameAsShipping2').attr("checked", "checked");
                                      $('#jobbillingaddress').css("display", "none");
                                    </script>
                                    {{else}}
                                    <script>
                                      $('#chkJobSameAsShipping2').removeAttr("checked");
                                      $('#jobbillingaddress').css("display", "flex");
                                    </script>
                                    {{/if}}
                                  </div>
                                  <div class="row jobbillingaddress" id="jobbillingaddress" style="margin: 4px 12px;">
                                    <div class="col-12 col-md-6" style="padding: 0;">
                                      <div class="form-group" style="margin: 4px;"><label>Street
                                          Address</label><textarea class="form-control"
                                          style="width: 100%;height: 116px;" rows="4" id="edtCustomerBillingAddress"
                                          name="edtCustomerBillingAddress"
                                          value="{{record.jobbillingaddress}}"></textarea>
                                      </div>
                                    </div>
                                    <div class="col-12 col-md-6">
                                      <div class="row">
                                        <div class="col-6" style="padding: 0;">
                                          <div class="form-group" style="margin: 4px;"><label>City
                                              / Town</label><input type="text" class="form-control"
                                              id="edtJobCustomerBillingCity" name="edtJobCustomerBillingCity"
                                              value="{{record.jobbcity}}">
                                          </div>
                                        </div>
                                        <div class="col-6" style="padding: 0;">
                                          <div class="form-group" style="margin: 4px;">
                                            <label>State /
                                              Region</label><input type="text" class="form-control"
                                              id="edtJobCustomerBillingState" name="edtJobCustomerBillingState"
                                              value="{{record.jobbstate}}">
                                          </div>
                                        </div>
                                        <div class="col-6" style="padding: 0;">
                                          <div class="form-group" style="margin: 4px;"><label>ZIP
                                              Code</label><input type="text" class="form-control"
                                              id="edtJobCustomerBillingZIP" name="edtJobCustomerBillingZIP"
                                              value="{{record.jobbpostalcode}}">
                                          </div>
                                        </div>
                                        <div class="col-6" style="padding: 0;">
                                          <div class="form-group" style="margin: 4px;">
                                            <label>Country</label><select class="form-control" id="sJobedtCountry"
                                              name="sJobedtCountry">
                                              {{#each item in
                                              countryList}}
                                              {{#if equals item
                                              record.jobbcountry }}
                                              <option value="{{record.jobbcountry}}" selected="">
                                                {{record.jobbcountry}}
                                              </option>
                                              {{else}}
                                              <option value="{{item}}">
                                                {{item}}</option>
                                              {{/if}}
                                              {{/each}}
                                            </select>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <div class="tab-pane border rounded-0 tab-Job5" role="tabpanel" id="tab-Job5"
                              style="border-color: #ededed #00a3d3 #00a3d3 #00a3d3 !important;">
                              <div class="row no-gutters" style="margin: 12px;">
                                <div class="col">
                                  <div
                                    class="form-group d-flex d-sm-flex d-xl-flex flex-column flex-grow-1 align-items-start align-items-sm-start align-items-xl-start"
                                    style="margin: 4px;"><label>Notes</label>
                                    <textarea class="border rounded flex-grow-1" style="width: 100%;height: 116px;"
                                      rows="4" id="txaJobNotes" name="txaJobNotes">{{record.jobnotes}}</textarea>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <div class="tab-pane border rounded-0 tab-Job6" role="tabpanel" id="tab-Job6"
                              style="border-color: #ededed #00a3d3 #00a3d3 #00a3d3 !important;">
                              <div class="row no-gutters d-xl-flex flex-column justify-content-xl-start"
                                style="margin: 12px;">
                                <div class="col d-xl-flex align-items-xl-end">
                                  <div class="form-group d-xl-flex flex-column justify-content-xl-start"
                                    style="margin: 4px;padding-right:4px;"><label class="text-nowrap">Customer
                                      Type</label>

                                    <select type="search" class="form-control" id="sltJobCustomerType"
                                      value="{{record.clienttype}}" name="sltJobCustomerType"
                                      style="background-color:rgb(255, 255, 255); cursor: pointer;">
                                    </select>

                                  </div>

                                  <div class="form-group d-xl-flex flex-column align-items-xl-start"
                                    style="margin: 4px;padding-left:4px;"><label class="text-nowrap">Preferred Payment
                                      Method</label>
                                    <select type="search" class="form-control" id="sltJobPreferredPayment"
                                      name="sltJobPreferredPayment" value="{{record.preferedpayment}}"
                                      style="background-color:rgb(255, 255, 255); cursor: pointer;">
                                    </select>
                                  </div>
                                  <div class="form-group d-xl-flex flex-column justify-content-xl-start"
                                    style="margin: 4px; padding-left:4px;"><label class="text-nowrap">Terms</label>
                                    <select type="search" class="form-control" id="sltJobTerms" name="sltJobTerms"
                                      value="{{record.jobterms}}"
                                      style="background-color:rgb(255, 255, 255); cursor: pointer;">
                                    </select>
                                  </div>

                                  <div class="form-group d-xl-flex flex-column justify-content-xl-start"
                                    style="margin: 4px; disply:none;"><label class="text-nowrap">% Discount</label>
                                    <input type="text" class="form-control pointer" id="edtJobCustomerCardDiscount"
                                      name="edtJobCustomerCardDiscount" value="{{record.jobdiscount}}">
                                  </div>
                                </div>
                                <div class="col d-xl-flex align-items-xl-end" style="display:none!important;">
                                  <div class="form-group d-xl-flex flex-column justify-content-xl-start"
                                    style="margin: 4px;"><label class="text-nowrap">Preferred Delivery
                                      Method</label>
                                    <select class="form-control" style="width: 260px;" id="sltJobDeliveryMethod"
                                      name="sltJobDeliveryMethod">
                                      {{#each item in deliveryMethodList}}
                                      {{#if equals item record.deliverymethod }}
                                      <option value="{{record.jobdeliverymethod}}" selected="">
                                        {{record.jobdeliverymethod}}
                                      </option>
                                      {{else}}
                                      <option value="{{item}}">{{item}}</option>
                                      {{/if}}
                                      {{/each}}
                                    </select>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <div class="tab-pane border rounded-0 tab-Job8" role="tabpanel" id="tab-Job8"
                              style="border-color: #ededed #00a3d3 #00a3d3 #00a3d3 !important;">
                              <div class="row no-gutters" style="margin: 12px;">
                                <div class="col">
                                  <style>
                                    .file-nameJobNoPOP span {
                                      width: 100%;
                                      float: left;
                                    }

                                    #file-displayJobNoPOP .fileIocns i.fa.fa-file {
                                      color: rgb(252, 181, 38);
                                      font-size: 24px;
                                    }

                                    #file-displayJobNoPOP {
                                      padding: 0;
                                      margin: 0;
                                    }

                                    .uploaded-elementJobNoPOP .confirm-actionJobNoPOP a.confirm-delete-attachmentJobNoPOP {
                                      padding: 6px 13px 5px;
                                      background-color: rgb(216, 68, 68) !important;
                                      border-color: rgb(197, 112, 119) rgb(169, 29, 29) rgb(169, 29, 29) rgb(197, 112, 119);
                                      color: rgb(255, 255, 255) !important;
                                      text-shadow: 1px 1px 1px rgba(30, 30, 30, 0.15);
                                      line-height: initial;
                                      font-size: 12px;
                                      float: left;
                                    }

                                    /* HERE */
                                    #files_viewJobNoPOP .modal-title {
                                      white-space: nowrap;
                                      overflow: hidden;
                                      text-overflow: ellipsis;
                                      width: 70%;
                                    }

                                    #files_viewJobNoPOP .modal-title {
                                      color: #333;
                                      font-size: 18px;
                                      font-weight: 700;
                                      text-rendering: optimizelegibility;
                                      padding: 9px 0;
                                      padding-left: 15px;
                                      padding-top: 11px;
                                    }

                                    #files_viewJobNoPOP .modal-dialog {
                                      width: 750px;
                                      margin: 30px auto;
                                    }

                                    #files_viewJobNoPOP .modal-header .close {
                                      margin-top: 0;
                                      width: 46px;
                                      height: 46px;
                                      padding: 6px 0 0;
                                      border-left: 1px solid #ddd;
                                      opacity: 1;
                                      margin: 0;
                                    }

                                    #files_viewJobNoPOP .modal-header {
                                      padding: 0;
                                      display: block;
                                    }

                                    #files_viewJobNoPOP .modal-body {
                                      background-color: rgb(250, 251, 251);
                                    }

                                    #files_viewJobNoPOP .image-previewer img {
                                      border: 3px solid #fff;
                                      box-shadow: 2px 2px 8px rgba(0, 0, 0, .2);
                                      width: 100%;
                                    }

                                    .download_buttonJobNoPOP {
                                      width: 100%;
                                      text-align: center;
                                      margin-top: 20px;
                                    }
                                  </style>
                                  <!-- Start Attachemt -->
                                  <div class="divTable" id="file-displayJobNoPOP">
                                    <div class="col inboxcol1">
                                      <img src="/icons/nofiles_icon.png" class="">
                                    </div>
                                    <div class="col inboxcol2">
                                      <div>Upload files or add files from the file
                                        library</div>
                                      <p style="color: #ababab;">Only users with
                                        access to your company can view these
                                        files</p>
                                    </div>
                                  </div>

                                  <input type="file" id="attachment-uploadJobNoPOP" style="display:none" multiple
                                    accept="image/*;capture=camera,.jpg,.gif,.png,.bmp,.tiff,.pdf,.doc,.docx,.xls,.xlsx,.ppt,
                                                                          .pptx,.odf,.csv,.txt,.rtf,.eml,.msg,.ods,.odt,.keynote,.key,.pages-tef,
                                                                          .pages,.numbers-tef,.numbers,.zip,.rar,.zipx,.xzip,.7z,image/jpeg,
                                                                          image/gif,image/png,image/bmp,image/tiff,application/pdf,
                                                                          application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,
                                                                          application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,
                                                                          application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml.presentation,
                                                                          application/vnd.oasis.opendocument.formula,text/csv,text/plain,text/rtf,message/rfc822,
                                                                          application/vnd.ms-outlook,application/vnd.oasis.opendocument.spreadsheet,
                                                                          application/vnd.oasis.opendocument.text,application/x-iwork-keynote-sffkey,
                                                                          application/vnd.apple.keynote,application/x-iwork-pages-sffpages,
                                                                          application/vnd.apple.pages,application/x-iwork-numbers-sffnumbers,
                                                                          application/vnd.apple.numbers,application/zip,application/rar,
                                                                          application/x-zip-compressed,application/x-zip,application/x-7z-compressed">
                                  <button class="btn btn-primary btnUploadFileJobNoPOP new_attachment_btnJobNoPOP"
                                    type="button" style="margin: 4px;"><i class="fa fa-cloud-upload"
                                      style="margin-right: 5px;"></i>Upload</button>
                                  <!-- END Attachments -->
                                </div>
                              </div>
                            </div>

                            <!-- View File Attachemt -->
                            <div id="files_viewJobNoPOP" class="modal fade" role="dialog">
                              <div class="modal-dialog">
                                <!-- Modal content-->
                                <div class="modal-content">
                                  <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal">x</button>
                                    <h4 class="modal-title">
                                      {{uploadedFileJobNoPOP.name}}</h4>
                                  </div>
                                  <div class="modal-body">
                                    {{#if uploadedFileJobNoPOP.image}}
                                    <div class="image-previewer">
                                      <img src="{{uploadedFileJobNoPOP.link}}">
                                    </div>
                                    {{else}}
                                    <div class=" default-file {{uploadedFileJobNoPOP.class}}">

                                    </div>
                                    {{/if}}
                                    <div class="download_buttonJobNoPOP">
                                      <a class="new_create_btn btn btn-primary" id="downloadButtonJobNoPOP"
                                        download="{{uploadedFileJobNoPOP.name}}"
                                        href="{{uploadedFileJobNoPOP.link}}">Download</a>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <!-- End View File attachment -->

                            <div class="tab-pane border rounded-0 tab-Job9" role="tabpanel" id="tab-Job9"
                              style="border-color: #ededed #00a3d3 #00a3d3 #00a3d3 !important;">
                              <div class="row no-gutters" style="margin: 12px;">
                                <div class="col d-xl-flex align-items-xl-center">
                                  <div class="form-group flex-grow-1" style="margin: 4px;"><label class="text-nowrap"
                                      contenteditable="true">Custom Field
                                      1</label><input type="text" class="form-control" id="edtJobCustomeField1"
                                      name="edtJobCustomeField1" value="{{record.jobcustfield1}}"></div>
                                  <div class="form-group flex-grow-1" style="margin: 4px;"><label class="text-nowrap"
                                      contenteditable="true">Custom Field
                                      2</label><input type="text" class="form-control" id="edtJobCustomeField2"
                                      name="edtJobCustomeField2" value="{{record.jobcustfield2}}"></div>
                                  <div class="form-group flex-grow-1" style="margin: 4px;"><label class="text-nowrap"
                                      contenteditable="true">Custom Field
                                      3</label><input type="text" class="form-control" id="edtJobCustomeField3"
                                      name="edtJobCustomeField3" value="{{record.jobcustfield3}}"></div>
                                  <div class="form-group flex-grow-1" style="margin: 4px;"><label class="text-nowrap"
                                      contenteditable="true">Custom Field
                                      4</label><input type="text" class="form-control" id="edtJobCustomeField4"
                                      name="edtJobCustomeField4" value="{{record.jobcustfield4}}"></div>
                                </div>
                              </div>
                            </div>
                            <div class="tab-pane border rounded-0 tab-Job10" role="tabpanel" id="tab-Job10"
                              style="border-color: #ededed #00a3d3 #00a3d3 #00a3d3 !important;">
                              <div class="row no-gutters d-xl-flex flex-column justify-content-xl-start"
                                style="margin: 12px;">
                                <div class="col">
                                  <div class="custom-control custom-switch" style="margin: 4px;"><input
                                      class="custom-control-input" type="checkbox" id="formCheckJob-2" checked><label
                                      class="custom-control-label" for="formCheckJob-2">This customer is tax
                                      exempt</label></div>
                                </div>

                                {{#if equals record.jobtaxcode "NT"}}
                                <script>
                                  $('#formCheckJob-2').attr("checked", "checked");
                                  $('#autoUpdateJob').css('display', 'none');
                                </script>
                                {{else}}
                                <script>
                                  $('#formCheckJob-2').removeAttr("checked");
                                  $('#autoUpdateJob').css('display', 'block');
                                </script>
                                {{/if}}

                                <div class="col d-xl-flex align-items-xl-end">
                                  <div id="autoUpdateJob" style="display: none;">
                                    <div
                                      class="form-group d-flex d-sm-flex d-xl-flex flex-column flex-grow-1 align-items-start align-items-sm-start align-items-xl-start"
                                      style="margin: 4px;"><label class="text-nowrap">Tax
                                        Code</label>
                                      <select type="search" class="form-control" value="{{record.jobtaxcode}}"
                                        style="width: 260px; background-color:rgb(255, 255, 255); cursor: pointer;"
                                        id="sltJobTaxCode" name="sltJobTaxCode">
                                      </select>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="d-xl-flex justify-content-between align-items-xl-center"
                        style="margin: 16px 0px 0px 0px;">
                        <button class="btn btn-success btnSaveJob" type="button"><i class="fa fa-save"
                            style="margin-right: 5px;"></i>Save</button>
                        <div>
                          <button class="btn btn-warning btnJobTask" type="button"><i class="fas fa-plus"
                              style="margin-right: 5px;"></i>Task</button>
                          <button class="btn btn-primary btnJobEmail" type="button"><i class="fas fa-plus"
                              style="margin-right: 5px;"></i>Email</button>
                          <button class="btn btn-success btnJobAppointment" type="button"><i class="fas fa-plus"
                              style="margin-right: 5px;"></i>Appointment</button>
                          <button class="btn btn-info btnJobQuote" type="button"><i class="fas fa-plus"
                              style="margin-right: 5px;"></i>Quote</button>
                          <button class="btn btn-warning btnJobSalesOrder" type="button"><i class="fas fa-plus"
                              style="margin-right: 5px;"></i>Sales
                            Order</button>
                          <button class="btn btn-primary btnJobInvoice" type="button"><i class="fas fa-plus"
                              style="margin-right: 5px;"></i>Invoice</button>
                          <button class="btn btn-success btnJobRefund" type="button"><i class="fas fa-plus"
                              style="margin-right: 5px;"></i>Refund</button>
                        </div>
                        <button class="btn btn-secondary btnBack" type="button"><i class="fa fa-close"
                            style="margin-right: 5px;"></i>Cancel</button>
                      </div>
                    </div>
                    {{/if}}
                  </div>
                  {{else}}
                  <!-- end job -->
                  <div class="tab-pane active border rounded-0 tab-2" role="tabpanel" id="tab-2"
                    style="background-color: #ededed; border-color: #ededed #00a3d3 #00a3d3 #00a3d3 !important;">
                    {{#if equals currentTab 'tab-2'}}
                    <div class="row d-xl-flex flex-column justify-content-xl-center" style="margin: 12px;">
                      <div class="col">
                        <div class="row">
                          <div class="form-group col-md-3" style="padding-left: 4px;">
                            <label>Company Name</label>
                            <input type="text" class="form-control" id="edtCustomerCompany" name="edtCustomerCompany"
                              value="{{record.company}}">
                          </div>
                          <div class="form-group col-md-4" style="padding-left:4px;">
                            <label>Customer Email</label>
                            <input type="text" class="form-control" id="edtCustomerEmail" name="edtCustomerEmail"
                              value="{{record.email}}">
                          </div>
                          <div class="form-group col-md-3" style="padding-left:4px;">
                              {{>vs1___dropdown
                                      data=record.status
                                      type='search'
                                      id='leadStatus'
                                      name='leadStatus'
                                      modalId= 'statusPopModal'
                                      list_template_name='statuspop'
                                      modal_title='Status'
                                      innerModal=true
                                      label = 'Status'
                                      colNameForValue = 'colStatusName'
                                      is_editable=true
                                      noBorder=false
                              }}
                          </div>
                          <div class="form-group col-md-2" style="padding-left :4px;padding-right:4px;">
                            <label>Sales Quota</label>
                            <input type="text" class="form-control" id="edtSalesQuota" name="edtSalesQuota"
                              value="{{formatPrice record.salesQuota}}"
                              title="Displays as Rev Counter on Sales Manager Dashboard">
                          </div>
                        </div>
                        <div class="row">
                          <div class="col d-xl-flex align-items-xl-start" style="padding: 0;">
                            <div class="col-6 col-md-1" style="padding: 0px 8px;">
                              <div class="form-group" style="margin: 4px;padding-right:4px;">
                                  {{>vs1___dropdown
                                          data=record.title
                                          type='search'
                                          id='editCustomerTitle'
                                          name='editCustomerTitle'
                                          modalId= 'titlePopModal'
                                          list_template_name='title_list_pop'
                                          modal_title='Title'
                                          innerModal=true
                                          label = 'Title'
                                          colNameForValue = 'colTitleName'
                                          is_editable=true
                                          noBorder=false
                                  }}
                              </div>
                            </div>
                            <div class="form-group flex-grow-1" style="margin: 4px;"><label class="text-nowrap">First
                                Name</label><input type="text" class="form-control" id="edtFirstName"
                                name="edtFirstName" value="{{record.firstname}}">
                            </div>
                            <div class="form-group flex-grow-1" style="margin: 4px;padding-left:4px;"><label
                                class="text-nowrap">Middle
                                Name</label><input type="text" class="form-control" id="edtMiddleName"
                                name="edtMiddleName" value="{{record.middlename}}"></div>
                            <div class="form-group flex-grow-1" style="margin: 4px; padding-left:4px;"><label
                                class="text-nowrap">Last
                                Name</label><input type="text" class="form-control" id="edtLastName" name="edtLastName"
                                value="{{record.lastname}}">
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col d-xl-flex flex-row align-items-xl-start" style="padding: 0;">
                            <div class="form-group flex-grow-1" style="margin: 4px;padding-right:4px;"><label
                                class="text-nowrap">Phone</label><input type="text" class="form-control"
                                id="edtCustomerPhone" name="edtCustomerPhone" value="{{record.phone}}">
                            </div>
                            <div class="form-group flex-grow-1" style="margin: 4px;"><label
                                class="text-nowrap">Mobile</label><input type="text" class="form-control"
                                id="edtCustomerMobile" name="edtCustomerMobile" value="{{record.mobile}}">
                            </div>
                            <div class="form-group flex-grow-1" style="margin: 4px;padding-left:4px;"><label
                                class="text-nowrap">Fax</label><input type="text" class="form-control"
                                id="edtCustomerFax" name="edtCustomerFax" value="{{record.fax}}"></div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col d-xl-flex flex-row align-items-xl-start" style="padding: 0;">
                            <div class="form-group col-md-3" style="margin: 4px; padding-left: 0px;padding-right :4px;">
                              <label class="text-nowrap">Skype ID</label>
                              <input type="text" class="form-control" id="edtCustomerSkypeID" name="edtCustomerSkypeID"
                                value="{{record.skype}}">
                            </div>
                            <div class="form-group col-md-3" style="margin: 4px;padding-left :4px;padding-right:4px;">
                              <label class="text-nowrap">Website</label>
                              <input type="text" class="form-control" id="edtCustomerWebsite" name="edtCustomerWebsite"
                                value="{{record.website}}">
                            </div>
                            <div class="form-group col-md-2" style="margin: 4px;padding-left:4px;padding-right :4px;">
                                {{>vs1___dropdown
                                        data=record.rep
                                        type='search'
                                        id='leadRep'
                                        name='leadRep'
                                        modalId= 'employeeListModal'
                                        list_template_name='employeelistpop'
                                        modal_title='Employee List'
                                        innerModal=false
                                        label = 'Rep'
                                        colNameForValue = 'colEmployeeName'
                                        is_editable=true
                                        noBorder=false
                                }}
                            </div>
                            <div class="form-group col-md-2" style="margin: 4px;padding-left:4px;padding-right:4px;">
                              <label for="leadSource">Source</label>
                              <select class="form-control" id="leadSource" value="{{record.source}}">
                                <option>Unknown</option>
                                <option>Google</option>
                                <option>Phone</option>
                                <option>Search Engine</option>
                              </select>
                            </div>
                            <style>
                              @media (max-width: 420px) {
                                .chkSameSupplier {
                                  margin-top: 20px !important;
                                }
                              }
                            </style>
                            <div class="custom-control custom-switch chkSameSupplier col-md-2"
                              style="margin: 4px; margin-top: 41px;">
                              <input class="custom-control-input" type="checkbox" id="chkSameAsSupplier"
                                style=" cursor: pointer;" checked="{{#if record.issupplier}}checked{{/if}}">
                              <label class="custom-control-label" for="chkSameAsSupplier" style=" cursor: pointer;">Is
                                Also Supplier</label>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="col" style="padding: 4px;margin-top: 16px;">
                        <div>
                          <ul class="nav nav-tabs nav-justified">
                            <li class="nav-item" style="cursor: pointer;"><a class="nav-link crmTab active" role="tab"
                                data-toggle="tab" data-target="#tab-crm">CRM</a></li>
                            <li class="nav-item" style="cursor: pointer;"><a class="nav-link" role="tab"
                                data-toggle="tab" data-target="#tab-4">Address</a></li>
                            <li class="nav-item" style="cursor: pointer;"><a class="nav-link" role="tab"
                                data-toggle="tab" data-target="#tab-5">Notes</a></li>
                            <li class="nav-item" style="cursor: pointer;"><a class="nav-link bilingTab" role="tab"
                                data-toggle="tab" data-target="#tab-6">Invoicing</a></li>
                            {{#if record.issupplier}}
                            <!-- <li class="nav-item" style="cursor: pointer;"><a class="nav-link bilingTab" role="tab"
                                data-toggle="tab" data-target="#tab-7">Billing</a></li> -->
                            {{/if}}
                            <li class="nav-item attachmentTab" style="cursor: pointer;"><a class="nav-link" role="tab"
                                data-toggle="tab" data-target="#tab-8">{{#if attachmentCount}}<span
                                  id="attachment-count">{{attachmentCount}}</span>{{/if}}
                                Attachments</a></li>
                            <li class="nav-item" style="cursor: pointer;"><a class="nav-link" role="tab"
                                data-toggle="tab" data-target="#tab-9">Custom Fields</a></li>
                            <li class="nav-item" style="cursor: pointer;"><a class="nav-link taxTab" role="tab"
                                data-toggle="tab" data-target="#tab-10">Tax</a></li>
                          </ul>
                          <div class="tab-content">
                            <div class="tab-pane border rounded-0 tab-crm active" role="tabpanel" id="tab-crm"
                              style="border-color: #ededed #00a3d3 #00a3d3 #00a3d3 !important;padding: 20px;">
                                <div class="row d-xl-flex flex-row justify-content-xl-center">
                                    <div class="col float-left flex-grow-1 mb-4" style="margin-bottom: 0 !important;">
                                        <button class="btn btn-primary btnRefreshCrm" type="button" style="margin: 14px;"><i
                                                class="la la-lightbulb-o" style="padding-right: 5px;"></i>Refresh</button>
                                    </div>
                                    <div class="col d-xl-flex justify-content-xl-end align-items-xl-start">
                                        {{> export_import_print_display_button Import="hiddenButton" tablename="tblCustomerCrmListWithDate"}}
                                    </div>
                                </div>
<!--                              {{> non_transactional_list tablename="tblCustomerCrmListWithDate"}}-->
                                {{>datatablelist
                                        tablename="tblCustomerCrmListWithDate"
                                        tableclass="tblCustomerCrmListWithDate"
                                        apiName= apiFunction
                                        indexeddbname = 'TCRMCustomerTaskList'
                                        tableheaderrecords = tableheaderrecords
                                        exportfilename = 'Customer CRM List'
                                        istransaction = true
                                        apiParams= apiParams
                                        datahandler = datahandler
                                        service=service
                                        lowercaseDataName='tprojecttaskslist'
                                        exIndexDBName = 'tprojecttaskslist'
                                        exdatahandler = exDataHandler
                                        searchAPI = searchAPI
                                        showPlusButtonCRM = true
                                }}
                            </div>
                            <div class="tab-pane border rounded-0" role="tabpanel" id="tab-4"
                              style="border-color: #ededed #00a3d3 #00a3d3 #00a3d3 !important;">
                              <div class="row no-gutters flex-column" style="margin: 12px;">
                                <div class="col">
                                  <div class="row no-gutters">
                                    <h4 style="margin: 4px;">Shipping&nbsp;Address
                                    </h4>
                                  </div>
                                  <div class="row no-gutters">
                                    <div class="col colStreetAddress" id="colStreetAddress" style="padding: 0;">
                                      <div
                                        class="form-group d-flex d-sm-flex d-xl-flex flex-column flex-grow-1 align-items-start align-items-sm-start align-items-xl-start"
                                        style="margin: 4px;">
                                        <label>Street Address</label>
                                        <textarea class="border rounded flex-grow-1" style="width: 100%;height: 116px;"
                                          rows="4" id="edtCustomerShippingAddress" name="edtCustomerShippingAddress"
                                          value="{{record.shippingaddress}}"></textarea>
                                      </div>
                                    </div>
                                    <div class="col d-xl-flex align-items-xl-start colAddressDetails"
                                      id="colAddressDetails" style="padding: 0;">
                                      <div
                                        class="row no-gutters d-xl-flex flex-column flex-grow-1 justify-content-xl-start">
                                        <div class="col d-xl-flex flex-grow-1 align-items-xl-start">
                                          <div class="form-group flex-grow-1" style="margin: 4px;padding-left:4px;">
                                            <label>Suburb</label>
                                            <input type="text" class="form-control" id="edtCustomerShippingSuburb"
                                              name="edtCustomerShippingSuburb" value="{{record.ssuburb}}">
                                          </div>
                                          <div class="form-group flex-grow-1" style="margin: 4px;padding-left:4px;">
                                            <label>City / Town</label>
                                            <input type="text" class="form-control" id="edtCustomerShippingCity"
                                              name="edtCustomerShippingCity" value="{{record.scity}}">
                                          </div>
                                          <div class="form-group flex-grow-1" style="margin: 4px;padding-left:4px;">
                                            <label>State / Region</label>
                                            <input type="text" class="form-control" id="edtCustomerShippingState"
                                              name="edtCustomerShippingState" value="{{record.sstate}}">
                                          </div>
                                        </div>
                                        <div class="col d-xl-flex align-items-xl-start">
                                          <div class="form-group flex-grow-1" style="margin: 4px;padding-left:4px;">
                                            <label>ZIP Code</label>
                                            <input type="text" class="form-control" id="edtCustomerShippingZIP"
                                              name="edtCustomerShippingZIP" value="{{record.spostalcode}}">
                                          </div>
                                          <div
                                            class="form-group d-xl-flex flex-column flex-grow-1 justify-content-xl-start"
                                            style="margin: 4px;padding-left:4px;">
                                              {{>vs1___dropdown
                                                      data=record.scountry
                                                      type='search'
                                                      id='sedtCountry'
                                                      name='sedtCountry'
                                                      modalId= 'countryPopModal'
                                                      list_template_name='CountryModal'
                                                      modal_title='Country'
                                                      innerModal=true
                                                      label = 'Country'
                                                      colNameForValue = 'colCountry'
                                                      is_editable=true
                                                      noBorder=false
                                              }}
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                                <style>
                                  .billingaddress {
                                    display: none;
                                  }
                                </style>
                                <script>
                                  modalDraggable();

                                  function myFunction() {
                                    const checkBox = document.getElementById("chkSameAsShipping2");
                                    const billingAddress = document.getElementById("billingaddress");
                                    if (checkBox.checked === true) {
                                      billingAddress.style.display = "none";
                                    } else {
                                      billingAddress.style.display = "flex";
                                    }
                                  }
                                </script>
                                <div class="col">
                                  <div class="row no-gutters" style="margin-top: 12px;">
                                    <div class="col d-xl-flex align-items-start" style="padding: 0;">
                                      <h4 class="flex-grow" style="margin: 4px;">
                                        Billing Address</h4>
                                      <div class="custom-control custom-switch chkaddress" style="margin: 8px;">
                                        <input class="custom-control-input" type="checkbox" id="chkSameAsShipping2"
                                          onclick="myFunction()" style=" cursor: pointer;" checked>
                                        <label class="custom-control-label" for="chkSameAsShipping2"
                                          style=" cursor: pointer;">Same as
                                          Shipping</label>
                                      </div>
                                    </div>
                                    {{#if equals isSameAddress true}}
                                    <script>
                                      $('#chkSameAsShipping2').attr("checked", "checked");
                                      $('#billingaddress').css("display", "none");
                                    </script>
                                    {{else}}
                                    <script>
                                      $('#chkSameAsShipping2').removeAttr("checked");
                                      $('#billingaddress').css("display", "flex");
                                    </script>
                                    {{/if}}
                                  </div>
                                  <div class="row no-gutters billingaddress" id="billingaddress">
                                    <div class="col colBillStreetAddress" id="colBillStreetAddress" style="padding: 0;">
                                      <div
                                        class="form-group d-flex d-sm-flex d-xl-flex flex-column flex-grow-1 align-items-start align-items-sm-start align-items-xl-start"
                                        style="margin: 4px;">
                                        <label>Street Address</label>
                                        <textarea class="border rounded flex-grow-1" style="width: 100%;height: 116px;"
                                          rows="4" id="edtCustomerBillingAddress" name="edtCustomerBillingAddress"
                                          value="{{record.billingaddress}}"></textarea>
                                      </div>
                                    </div>
                                    <div class="col d-xl-flex align-items-xl-start colBillStreetAddressDetails"
                                      id="colBillStreetAddressDetails" style="padding: 0;">
                                      <div
                                        class="row no-gutters d-xl-flex flex-column flex-grow-1 justify-content-xl-start">
                                        <div class="col d-xl-flex align-items-xl-start">
                                          <div class="form-group flex-grow-1" style="margin: 4px;">
                                            <label>City / Town</label>
                                            <input type="text" class="form-control" id="edtCustomerBillingCity"
                                              name="edtCustomerBillingCity" value="{{record.bcity}}">
                                          </div>
                                          <div class="form-group flex-grow-1" style="margin: 4px;">
                                            <label>State / Region</label>
                                            <input type="text" class="form-control" id="edtCustomerBillingState"
                                              name="edtCustomerBillingState" value="{{record.bstate}}">
                                          </div>
                                        </div>
                                        <div class="col d-xl-flex align-items-xl-start">
                                          <div class="form-group flex-grow-1" style="margin: 4px;">
                                            <label>ZIP Code</label>
                                            <input type="text" class="form-control" id="edtCustomerBillingZIP"
                                              name="edtCustomerBillingZIP" value="{{record.bpostalcode}}">
                                          </div>
                                          <div class="form-group flex-grow-1" style="margin: 4px;">
                                            <label>Country</label>
                                            <select class="form-control" id="bedtCountry" name="bedtCountry"
                                              style="cursor: pointer;">
                                              {{#each item in
                                              countryList}}
                                              {{#if equals item
                                              record.bcountry }}
                                              <option value="{{record.bcountry}}" selected="">
                                                {{record.bcountry}}
                                              </option>
                                              {{else}}
                                              <option value="{{item}}">
                                                {{item}}</option>
                                              {{/if}}
                                              {{/each}}
                                            </select>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <div class="tab-pane border rounded-0" role="tabpanel" id="tab-5"
                              style="border-color: #ededed #00a3d3 #00a3d3 #00a3d3 !important;">
                              <div class="row no-gutters" style="margin: 12px;">
                                <div class="col">
                                  <div
                                    class="form-group d-flex d-sm-flex d-xl-flex flex-column flex-grow-1 align-items-start align-items-sm-start align-items-xl-start"
                                    style="margin: 4px;"><label>Notes</label>
                                    <textarea class="border rounded flex-grow-1" style="width: 100%;height: 116px;"
                                      rows="4" id="txaNotes" name="txaNotes">{{record.notes}}</textarea>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <div class="tab-pane border rounded-0" role="tabpanel" id="tab-6"
                              style="border-color: #ededed #00a3d3 #00a3d3 #00a3d3 !important;">
                              <div class="row" style="margin: 12px;">
                                <div class="col-md-2 col-6" style="padding: 0;">
                                  <div class="form-group d-xl-flex flex-column justify-content-xl-start"
                                    style="margin: 4px;padding-right:4px;">
                                      {{>vs1___dropdown
                                              data=record.clienttype
                                              type='search'
                                              id='sltCustomerType'
                                              name='sltCustomerType'
                                              modalId= 'customerTypePopModal'
                                              list_template_name='clienttypepopup'
                                              modal_title='Customer Type'
                                              innerModal=true
                                              label = 'Customer Type'
                                              colNameForValue = 'colTypeName'
                                              is_editable=true
                                              noBorder=false
                                      }}

                                  </div>
                                </div>
                                <div class="col-md-2 col-6" style="padding: 0;">
                                  <div class="form-group" style="margin: 4px;padding-left:4px;">
                                      {{>vs1___dropdown
                                              data=record.terms
                                              type='search'
                                              id='sltTerms'
                                              name='sltTerms'
                                              modalId= 'termPopModal'
                                              list_template_name='termlistpop'
                                              modal_title='Terms'
                                              innerModal=true
                                              label = 'Terms'
                                              colNameForValue = 'colName'
                                              is_editable=true
                                              noBorder=false
                                      }}
                                  </div>
                                </div>

                                <div class="col-md-2 col-6" style="padding: 0;">
                                  <div class="form-group d-xl-flex flex-column justify-content-xl-start"
                                    style="margin: 4px;padding-left:4px;"><label class="text-nowrap">% Discount</label>
                                    <input type="text" class="form-control pointer" id="edtCustomerCardDiscount"
                                      name="edtCustomerCardDiscount" value="{{record.discount}}">
                                  </div>
                                </div>
                                <!-- I need to talk with Josef for this part-->
                                <div class="col-md-2 col-6" style="padding: 0;">
                                  <div class="form-group d-xl-flex flex-column justify-content-xl-start"
                                    style="margin: 4px;padding-left:4px;"><label class="text-nowrap">Credit
                                      Limit</label>
                                    <input type="text" class="form-control pointer" id="edtCustomerCardDiscount"
                                      name="edtCustomerCardDiscount" value="{{record.discount}}">
                                  </div>
                                </div>

                                <div class="col-md-1 col-6" style="padding: 0; margin: 4px;margin-top: 41px; margin-right: 20px;">
                                  {{> toggle_button className="chkGlobalSettings" id="customer_stop_credit_toggle"
                                  width="131px" for="customer_stop_credit_toggle" displayName="Stop Credit"}}
                                </div>
                                  <div class="col-6 col-md-2" style="padding: 0;" data-toggle="tooltip" title="Selection required for Foreign Customers only" data-placement="bottom">
                                      {{> CurrencyWidget onlyCurrencyField="true" CurrentForeignExchangeCode =
                                              record.foreignExchangeCode}}
                                  </div>
                              </div>
                            </div>
                            <!--
                            <div class="tab-pane border rounded-0" role="tabpanel" id="tab-7"
                              style="border-color: #ededed #00a3d3 #00a3d3 #00a3d3 !important;">
                              <div class="row" style="margin: 6px;">
                                <div class="col-12 col-md-12">
                                  <div class="row">
                                    <div class="col-md-3">
                                      <div class="form-group d-xl-flex flex-column justify-content-xl-start"
                                        style="margin: 4px;"><label class="text-nowrap">Terms</label>
                                        <select type="search" class="form-control" id="sltTerms" name="sltTerms"
                                          style="background-color:rgb(255, 255, 255); cursor: pointer;">
                                        </select>
                                      </div>
                                    </div>
                                    <div class="col-md-3">
                                      <div class="form-group d-xl-flex flex-column align-items-xl-start"
                                        style="margin: 4px;"><label class="text-nowrap">Preferred Payment Method</label>
                                        <select type="search" class="form-control" id="sltPreferredPayment"
                                          name="sltPreferredPayment"
                                          style="background-color:rgb(255, 255, 255); cursor: pointer;">
                                        </select>
                                      </div>
                                    </div>
                                    <div class="col-md-3">
                                      <div class="form-group" style="margin: 4px;"><label
                                          class="text-nowrap d-xl-flex flex-column justify-content-xl-start align-items-xl-start">Account
                                          No</label>
                                        <input type="text" class="form-control" id="suppAccountNo" name="suppAccountNo"
                                          value="{{record.accountnumber}}">
                                      </div>
                                    </div>
                                    <div class="col-md-3">
                                      <div class="row justify-content-left desktopButtons" style=" margin-left:0px;">
                                        {{#if equals record.scountry "Unite States"}}
                                        {{> toggle_button className="chkGlobalSettings" id="contactor-1099"
                                        width="131px" for="choosetemplate" displayName="Contractor 1099"}}
                                        {{else}}
                                        {{/if}}
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>

                              <div class="row mb-4" style="margin: 6px;">
                                <div class="col-12 mt-2">
                                  <h4 style="margin-left: 4px;">Banking Details</h4>
                                </div>
                                <div class="col-6 col-md-3">
                                  <div class="form-group" style="margin: 4px;">
                                    <label>Bank Name</label>
                                    <select type="search" class="form-control pointer" id="edtBankName"
                                      name="edtBankName" value="{{record.bankName}}">
                                    </select>
                                  </div>
                                </div>
                                <div class="col-6 col-md-3">
                                  <div class="form-group" style="margin: 4px;">
                                    <label>Bank Account Name</label>
                                    <input type="text" class="form-control" id="edtBankAccountName"
                                      name="edtBankAccountName" value="{{record.bankAccountName}}">
                                  </div>
                                </div>
                                <div class="col-6 col-md-3">
                                  <div class="form-group" style="margin: 4px;">
                                    <label>BSB</label>
                                    <input type="text" class="form-control" id="edtBsb" name="edtBsb"
                                      value="{{record.bankAccountBSB}}">
                                  </div>
                                </div>
                                <div class="col-6 col-md-3">
                                  <div class="form-group" style="margin: 4px;">
                                    <label>Bank Account Number</label>
                                    <input type="text" class="form-control" id="edtBankAccountNumber"
                                      name="edtBankAccountNumber" value="{{record.bankAccountNo}}">
                                  </div>
                                </div>
                                <div class="col-6 col-md-3">
                                  <div class="form-group" style="margin: 4px;">
                                    <label>Swift Code</label>
                                    <input type="text" class="form-control" id="edtSwiftCode" name="edtSwiftCode"
                                      value="{{record.bankAccountNo}}">
                                  </div>
                                </div>
                                <div class="col-6 col-md-3">
                                  <div class="form-group" style="margin: 4px;">
                                    <label>Routing Number</label>
                                    <input type="text" class="form-control" id="edtRoutingNumber"
                                      name="edtRoutingNumber" value="{{record.routingNumber}}">
                                  </div>
                                </div>

                                <div class="col-6 col-md-3">
                                  {{> CurrencyWidget onlyCurrencyField="true" CurrentForeignExchangeCode =
                                  record.foreignExchangeCode}}
                                </div>

                              </div>
                            </div>
                            -->
                            <div class="tab-pane border rounded-0" role="tabpanel" id="tab-8"
                              style="border-color: #ededed #00a3d3 #00a3d3 #00a3d3 !important;">
                              <div class="row no-gutters" style="margin: 12px;">
                                <div class="col">
                                  <style>
                                    .file-name span {
                                      width: 100%;
                                      float: left;
                                    }

                                    .uploaded-on {
                                      display: none !important;
                                    }

                                    #file-display .fileIocns i.fa.fa-file {
                                      color: rgb(252, 181, 38);
                                      font-size: 24px;
                                    }

                                    #file-display {
                                      padding: 0;
                                      margin: 0;
                                    }

                                    .uploaded-element {
                                      display: inherit;
                                    }

                                    .uploaded-element {

                                      border: 1px solid rgb(237, 237, 237);
                                      border-top: none;

                                      /* float: left; */
                                      width: 100%;
                                      display: flex;
                                      align-items: center;
                                      padding: 1rem;
                                    }

                                    #file-display .fileIocns {
                                      background-image: url(img/file_icons-samall.png);
                                      background-repeat: no-repeat;
                                      background-position: 0 -105px;
                                    }

                                    #file-display .fileIocns {
                                      float: left;
                                      margin-right: 10px;
                                    }

                                    .file-name {
                                      float: left;
                                      width: 95%;
                                    }

                                    .uploaded-element-header {
                                      border: 1px solid rgb(237, 237, 237);
                                      border-top: none;
                                      float: left;
                                      width: 100%;
                                      display: flex;
                                      align-items: center;
                                      padding: 10px;
                                      background: #e3e6f0;
                                    }

                                    .uploaded-header {
                                      width: 100%;
                                      text-align: center;
                                    }

                                    .uploaded-element .confirm-action a.confirm-delete-attachment {
                                      padding: 6px 13px 5px;
                                      background-color: rgb(216, 68, 68) !important;
                                      border-color: rgb(197, 112, 119) rgb(169, 29, 29) rgb(169, 29, 29) rgb(197, 112, 119);
                                      color: rgb(255, 255, 255) !important;
                                      text-shadow: 1px 1px 1px rgba(30, 30, 30, 0.15);
                                      line-height: initial;
                                      font-size: 12px;
                                      float: left;
                                    }

                                    button.save-to-library {
                                      padding: 6px 13px 5px;
                                      border-radius: 4px;
                                      background: linear-gradient(rgb(255, 255, 255), rgb(230, 234, 236));
                                      border: 1px solid rgb(230, 230, 230);
                                      border-color: rgb(230, 230, 230) rgb(179, 179, 179) rgb(179, 179, 179) rgb(230, 230, 230) !important;
                                      color: rgb(204, 0, 0) !important;
                                      font-weight: bold;
                                      margin-left: 10px !important;
                                      font-size: 12px;
                                    }

                                    .uploaded-element {
                                      display: inherit;
                                    }

                                    /* HERE */
                                    #files_view .modal-title {
                                      white-space: nowrap;
                                      overflow: hidden;
                                      text-overflow: ellipsis;
                                      width: 70%;
                                    }

                                    #files_view .modal-title {
                                      color: #333;
                                      font-size: 18px;
                                      font-weight: 700;
                                      text-rendering: optimizelegibility;
                                      padding: 9px 0;
                                      padding-left: 15px;
                                      padding-top: 11px;
                                    }

                                    #files_view .modal-dialog {
                                      width: 750px;
                                      margin: 30px auto;
                                    }

                                    #files_view .modal-header .close {
                                      margin-top: 0;
                                      width: 46px;
                                      height: 46px;
                                      padding: 6px 0 0;
                                      border-left: 1px solid #ddd;
                                      opacity: 1;
                                      margin: 0;
                                    }

                                    #files_view .modal-header {
                                      padding: 0;
                                      display: block;
                                    }

                                    #files_view .modal-body {
                                      background-color: rgb(250, 251, 251);
                                    }

                                    #files_view .image-previewer img {
                                      border: 3px solid #fff;
                                      box-shadow: 2px 2px 8px rgba(0, 0, 0, .2);
                                      width: 100%;
                                    }

                                    .download_button {
                                      width: 100%;
                                      text-align: center;
                                      margin-top: 20px;
                                    }

                                    @media screen and (max-width: 450px) {
                                      .attachementsImage1 {
                                        width: 100% !important;
                                      }
                                    }
                                  </style>
                                  <!-- Start Attachemt -->
                                  <div class="divTable" id="file-display">
                                    <div class="col inboxcol1">
                                      <img src="/icons/nofiles_icon.png" class="attachementsImage1">
                                    </div>
                                    <div class="col inboxcol2">
                                      <div>Upload files or add files from <br class="breakPhone"
                                          style="display: none;">the file
                                        library</div>
                                      <p style="color: #ababab;">Only users with
                                        access to your<br class="breakPhone" style="display: none;"> company can
                                        view these files</p>
                                    </div>
                                  </div>

                                  <input type="file" id="attachment-upload" style="display:none" multiple
                                    accept="image/*;capture=camera,.jpg,.gif,.png,.bmp,.tiff,.pdf,.doc,.docx,.xls,.xlsx,.ppt,
                                          .pptx,.odf,.csv,.txt,.rtf,.eml,.msg,.ods,.odt,.keynote,.key,.pages-tef,
                                          .pages,.numbers-tef,.numbers,.zip,.rar,.zipx,.xzip,.7z,image/jpeg,
                                          image/gif,image/png,image/bmp,image/tiff,application/pdf,
                                          application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,
                                          application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,
                                          application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml.presentation,
                                          application/vnd.oasis.opendocument.formula,text/csv,text/plain,text/rtf,message/rfc822,
                                          application/vnd.ms-outlook,application/vnd.oasis.opendocument.spreadsheet,
                                          application/vnd.oasis.opendocument.text,application/x-iwork-keynote-sffkey,
                                          application/vnd.apple.keynote,application/x-iwork-pages-sffpages,
                                          application/vnd.apple.pages,application/x-iwork-numbers-sffnumbers,
                                          application/vnd.apple.numbers,application/zip,application/rar,
                                          application/x-zip-compressed,application/x-zip,application/x-7z-compressed">

                                  <button
                                    class="btn btn-primary btnUploadFile new_attachment_btn"
                                    type="button"
                                    style="margin: 4px;">
                                    <i class="fa fa-cloud-upload" style="margin-right: 5px;"></i>
                                    Upload
                                  </button>
                                </div>
                              </div>
                            </div>
                            <!-- View File Attachemt -->
                            <div id="files_view" class="modal fade" role="dialog">
                              <div class="modal-dialog">
                                <!-- Modal content-->
                                <div class="modal-content">
                                  <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal">x</button>
                                    <h4 class="modal-title">{{uploadedFile.name}}
                                    </h4>
                                  </div>
                                  <div class="modal-body">
                                    {{#if uploadedFile.image}}
                                    <div class="image-previewer">
                                      <img src="{{uploadedFile.link}}">
                                    </div>
                                    {{else}}
                                    <div class=" default-file {{uploadedFile.class}}">

                                    </div>
                                    {{/if}}
                                    <div class="download_button">
                                      <a class="new_create_btn btn btn-primary" id="downloadButton"
                                        download="{{uploadedFile.name}}" href="{{uploadedFile.link}}">Download</a>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <!-- End View File attachment -->
                            <div class="tab-pane border rounded-0" role="tabpanel" id="tab-9" style="border-color: #ededed #00a3d3 #00a3d3 #00a3d3 !important;">
                              <div class="row no-gutters" style="margin: 14px;">
                                <div class="col d-xl-flex align-items-xl-center">
                                  <div class="form-group flex-grow-1 checkbox1div" style="margin: 4px;padding-right:4px;">
                                    <label class="lblCustomField1">
                                      {{#if contactCloudPreferenceRec}}
                                        {{contactCloudPreferenceRec.customFields.[0].label}}
                                      {{else}}
                                        Custom Field 1
                                      {{/if}}
                                    </label>
                                    <input type="text" class="form-control" id="edtCustomField1" name="edtCustomField1" value="{{record.custfield1}}">
                                  </div>
                                  <div class="form-group flex-grow-1 checkbox2div" style="margin: 4px;">
                                    <label class="lblCustomField2">
                                      {{#if contactCloudPreferenceRec}}
                                        {{contactCloudPreferenceRec.customFields.[1].label}}
                                      {{else}}
                                        Custom Field 2
                                      {{/if}}
                                    </label>
                                    <input type="text" class="form-control" id="edtCustomField2" name="edtCustomField2" value="{{record.custfield2}}">
                                  </div>
                                  <div class="form-group flex-grow-1 checkbox3div" style="margin: 4px;padding-left:4px;">
                                    <label class="lblCustomField3">
                                      {{#if contactCloudPreferenceRec}}
                                        {{contactCloudPreferenceRec.customFields.[2].label}}
                                      {{else}}
                                        Custom Field 3
                                      {{/if}}
                                    </label>
                                    <input type="text" class="form-control" id="edtCustomField3" name="edtCustomField3" value="{{record.custfield3}}">
                                  </div>
                                  <div class="form-group flex-grow-1 checkbox4div" style="margin: 4px;padding-left:4px;">
                                    <label class="lblCustomField4">
                                      {{#if contactCloudPreferenceRec}}
                                        {{contactCloudPreferenceRec.customFields.[3].label}}
                                      {{else}}
                                        Custom Field 4
                                      {{/if}}
                                    </label>
                                    <input type="text" class="form-control" id="edtCustomField4" name="edtCustomField4" value="{{record.custfield4}}">
                                  </div>
                                </div>
                              </div>
                            </div>
                            <div class="tab-pane border rounded-0" role="tabpanel" id="tab-10"
                              style="border-color: #ededed #00a3d3 #00a3d3 #00a3d3 !important;">
                              <div class="row no-gutters d-xl-flex flex-column justify-content-xl-start"
                                style="margin: 12px;">
                                <div class="col">
                                  <div class="custom-control custom-switch" style="margin: 4px;"><input
                                      class="custom-control-input chkTaxExempt" type="checkbox" id="formCheck-2"
                                      style=" cursor: pointer;" checked><label class="custom-control-label"
                                      for="formCheck-2" style=" cursor: pointer;">Customer is tax
                                      exempt</label></div>
                                </div>

                                {{#if equals record.taxcode "NT"}}
                                <script>
                                  $('#formCheck-2').attr("checked", "checked");
                                  $('#autoUpdate').css('display', 'none');
                                </script>
                                {{else}}
                                <script>
                                  $('#formCheck-2').removeAttr("checked");
                                  $('#autoUpdate').css('display', 'block');
                                </script>
                                {{/if}}

                                <div class="col d-xl-flex align-items-xl-end">
                                  <div id="autoUpdate" style="display: none;">
                                    <div
                                      class="form-group d-flex d-sm-flex d-xl-flex flex-column flex-grow-1 align-items-start align-items-sm-start align-items-xl-start"
                                      style="margin: 4px;">
                                        {{>vs1___dropdown
                                                data=record.taxcode
                                                type='search'
                                                id='sltTaxCode'
                                                name='sltTaxCode'
                                                modalId= 'taxCodePopModal'
                                                list_template_name='taxratelistpop'
                                                modal_title='Tax Code'
                                                innerModal=true
                                                label = 'Tax Code'
                                                colNameForValue = 'colName'
                                                is_editable=true
                                                noBorder=false
                                        }}
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="d-xl-flex justify-content-between align-items-xl-center"
                        style="margin: 16px 0px 0px 0px;">
                        <button class="btn btn-success btnSave btn-auto-save" type="button"><i class="fa fa-save"
                            style="margin-right: 5px;"></i>Save</button>
                        <div>
                          <button class="btn btn-warning btnCustomerTask" type="button"><i class="fas fa-plus"
                              style="margin-right: 5px;"></i>Task</button>
                          <button class="btn btn-primary btnCustomerEmail" type="button"><i class="fas fa-plus"
                              style="margin-right: 5px;"></i>Email</button>
                          <button class="btn btn-success btnCustomerAppointment" type="button"><i class="fas fa-plus"
                              style="margin-right: 5px;"></i>Appointment</button>
                          <button class="btn btn-info btnCustomerQuote" type="button"><i class="fas fa-plus"
                              style="margin-right: 5px;"></i>Quote</button>
                          <button class="btn btn-warning btnCustomerSalesOrder" type="button"><i class="fas fa-plus"
                              style="margin-right: 5px;"></i>Sales Order</button>
                          <button class="btn btn-primary btnCustomerInvoice" type="button"><i class="fas fa-plus"
                              style="margin-right: 5px;"></i>Invoice</button>
                          <button class="btn btn-success btnCustomerRefund" type="button"><i class="fas fa-plus"
                              style="margin-right: 5px;"></i>Refund</button>
                        </div>
                        <div>
                          <a class="btn btn-danger" role="button" data-toggle="modal" href="#deleteCustomerModal"><i
                              class="fas fa-trash-alt" style="margin-right: 5px;"></i> Delete</a>
                          <button class="btn btn-secondary btnBack" type="button"><i class="fa fa-close"
                              style="margin-right: 5px;"></i>Cancel</button>
                        </div>
                      </div>
                      <div class="modal fade" role="dialog" tabindex="-1" id="deleteCustomerModal">
                        <div class="modal-dialog modal-dialog-centered" role="document">
                          <div class="modal-content">
                            <input type="hidden" style="width: 100%; display:none;" id="selectDeleteLineID"
                              name="selectDeleteLineID" readonly>
                            <div class="modal-header">
                              <h4>Delete</h4>
                              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">�</span>
                              </button>
                            </div>
                            <div class="modal-body">
                              <p>Please confirm that you want to delete this Customer.</p>
                              <button class="btn btn-danger float-right btnDeleteCustomer" id="btnDeleteCustomer"
                                type="button">
                                <i class="fas fa-trash-alt" style="margin-right: 5px;"></i>Delete Customer
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    {{/if}}
                  </div>
                  <div class="tab-pane border rounded-0 tab-3" role="tabpanel" id="tab-3"
                    style="border-color: #ededed #00a3d3 #00a3d3 #00a3d3 !important;">
                    {{#if equals currentTab 'tab-3'}}
                    <div class="row d-xl-flex flex-row justify-content-xl-center">
                      <div class="col float-left flex-grow-1 mb-4" style="margin-bottom: 0 !important;">
                        <button class="btn btn-primary btnRefreshJobDetails" type="button" style="margin: 14px;"><i
                            class="la la-lightbulb-o" style="padding-right: 5px;"></i>Refresh</button>
                        <button id="btnNewJob" name="btnNewJob" class="btn btn-primary" type="button"
                          style="margin: 14px;" role="button" data-toggle="modal" href="#addNewJobModal"><i
                            class="icon ion-plus" style="padding-right: 5px;"></i>New Job</button>
                      </div>
                        <div class="col d-xl-flex justify-content-xl-end align-items-xl-start">
                            {{> export_import_print_display_button tablename="tblCustomerJobDetailsList"}}
                        </div>
<!--                      <div class="col">-->
<!--                        <button id="printConfirmJob" class="btn btn-primary float-right jobprintConfirm printConfirmJob"-->
<!--                          type="button" style="margin:14px; background-color: #00A3D3; border-color: #00A3D3;">-->
<!--                          <i class="fa fa-print"-->
<!--                            style="padding-right: 5px; background-color: #00A3D3; border-color: #00A3D3;"></i>Print-->
<!--                        </button>-->
<!--                        <button class="btn btn-primary jobexport float-right" type="button"-->
<!--                          style="margin: 14px; background-color: #00A3D3; border-color: #00A3D3;" id="exportbtnJob"-->
<!--                          name="exportbtnJob">-->
<!--                          <i class="fas fa-file-export"-->
<!--                            style="padding-right: 5px; background-color: #00A3D3; border-color: #00A3D3;"></i>Export-->
<!--                        </button>-->
<!--                      </div>-->
                    </div>
                    <div class="row rowB" style="margin: 14px; margin-top: 0">
<!--                      <div class="card-body rounded" style="padding: 0;">-->
<!--                        {{> non_transactional_list tablename="tblCustomerJobDetailsList"}}-->

                          {{>datatablelist
                                  tablename="tblCustomerJobDetailsList"
                                  tableclass="tblCustomerJobDetailsList"
                                  apiName= apiFunction_JobDetailsList
                                  indexeddbname = 'TJobVS1List'
                                  tableheaderrecords = tableheaderrecords_JobDetailsList
                                  exportfilename = 'Customer Jov VS1 List'
                                  istransaction = false
                                  apiParams= apiParams_JobDetailsList
                                  datahandler = datahandler_JobDetailsList
                                  service=service_JobDetailsList
                                  lowercaseDataName='tjobvs1list'
                                  exIndexDBName = 'tjobvs1list'
                                  exdatahandler = exDataHandler_JobDetailsList
                                  searchAPI = searchAPI_JobDetailsList
                          }}
<!--                      </div>-->
                    </div>
                    <!-- New Job Pop Up Start Here  -->
                    <div class="modal fade" role="dialog" tabindex="-1" id="addNewJobModal">
                      <div class="modal-dialog modal-lg modal-dialog-scrollable" role="document">
                        <div class="modal-content">
                          <div class="modal-header">
                            <h4 id="add-account-title" name="add-job-title">New
                              Job <a role="button" data-toggle="modal" href="#helpModal2"><label
                                  class="lblplay">PLAY</label><i class="far fa-play-circle"
                                  style="font-size: 20px;"></i></a></h4><button type="button" class="close"
                              data-dismiss="modal" aria-label="Close"><span aria-hidden="true">�</span></button>
                          </div>
                          <div class="modal-body" style="background-color: #ededed;">
                            <input type="hidden" class="form-control" id="edtJobID" name="edtJobID"
                              style="display:none;">
                            <div>
                              <!-- <here -->

                              <div class="row d-xl-flex flex-column justify-content-xl-center" style="margin: 12px; ">
                                <div class="col">
                                  <div class="row">
                                    <div class="form-group flex-grow-1" style="margin: 4px;"><label>Company
                                        Name</label><input type="text" class="form-control" id="edtJobCustomerCompany"
                                        name="edtJobCustomerCompany" value="{{record.jobcompany}}" readonly>
                                      <input type="hidden" class="form-control" id="edtParentJobCustomerCompany"
                                        name="edtParentCustomerCompany" value="{{record.jobCompanyParent}}">
                                    </div>
                                    <div class="form-group flex-grow-1" style="margin: 4px;">
                                      <label>Email</label><input type="text" class="form-control"
                                        id="edtJobCustomerEmail" name="edtJobCustomerEmail" value="{{record.jobemail}}">
                                    </div>
                                  </div>
                                  <div class="row">
                                    <div class="col d-xl-flex align-items-xl-start" style="padding: 0;">
                                      <div class="form-group" style="margin: 4px;"><label
                                          class="text-nowrap">Title</label>
                                        <input type="text" class="form-control"
                                          style="width: 50px;min-width: 75px;max-width: 75px;" id="edtJobTitle"
                                          name="edtJobTitle" value="{{record.jobtitle}}">
                                      </div>
                                      <div class="form-group flex-grow-1" style="margin: 4px;"><label
                                          class="text-nowrap">First
                                          Name</label>
                                        <input type="text" class="form-control" id="edtJobFirstName"
                                          name="edtJobFirstName" value="{{record.jobfirstname}}">
                                      </div>
                                      <div class="form-group flex-grow-1" style="margin: 8px;"><label
                                          class="text-nowrap">Middle
                                          Name</label>
                                        <input type="text" class="form-control" id="edtJobMiddleName"
                                          name="edtJobMiddleName" value="{{record.jobmiddlename}}">
                                      </div>
                                      <div class="form-group flex-grow-1" style="margin: 8px;"><label
                                          class="text-nowrap">Last
                                          Name</label>
                                        <input type="text" class="form-control" id="edtJobLastName"
                                          name="edtJobLastName" value="{{record.joblastname}}">
                                      </div>
                                    </div>
                                  </div>

                                  <div class="row">
                                    <div class="col d-xl-flex align-items-xl-start" style="padding: 0;">
                                      <div class="form-group flex-grow-1" style="margin: 4px;"><label
                                          class="text-nowrap">Job
                                          Name</label><input type="text" class="form-control" id="edtJobName"
                                          name="edtJobName" value="{{record.jobName}}"></div>
                                      <div class="form-group flex-grow-1" style="margin: 4px;"><label
                                          class="text-nowrap">Job
                                          Number</label><input type="text" class="form-control" id="edtJobNumber"
                                          name="edtJobNumber" value="{{record.jobNumber}}"></div>
                                    </div>
                                  </div>

                                  <div class="row">
                                    <div class="col d-xl-flex flex-row align-items-xl-start" style="padding: 0;">
                                      <div class="form-group flex-grow-1" style="margin: 4px;"><label
                                          class="text-nowrap">Phone</label><input type="text" class="form-control"
                                          id="edtJobCustomerPhone" name="edtJobCustomerPhone"
                                          value="{{record.jobphone}}"></div>
                                      <div class="form-group flex-grow-1" style="margin: 4px;"><label
                                          class="text-nowrap">Mobile</label><input type="text" class="form-control"
                                          id="edtJobCustomerMobile" name="edtJobCustomerMobile"
                                          value="{{record.jobmobile}}"></div>
                                      <div class="form-group flex-grow-1" style="margin: 4px;"><label
                                          class="text-nowrap">Fax</label><input type="text" class="form-control"
                                          id="edtJobCustomerFax" name="edtJobCustomerFax" value="{{record.jobfax}}">
                                      </div>
                                    </div>
                                  </div>
                                  <div class="row">
                                    <div class="col d-xl-flex flex-row align-items-xl-start" style="padding: 0;">
                                      <div class="form-group flex-grow-1" style="margin: 4px;"><label
                                          class="text-nowrap">Skype
                                          ID</label><input type="text" class="form-control" id="edtJobCustomerSkypeID"
                                          name="edtJobCustomerSkypeID" value="{{record.jobskype}}">
                                      </div>
                                      <div class="form-group flex-grow-1" style="margin: 4px;"><label
                                          class="text-nowrap">Website</label><input type="text" class="form-control"
                                          id="edtJobCustomerWebsite" name="edtJobCustomerWebsite"
                                          value="{{record.jobwebsite}}">
                                      </div>
                                    </div>
                                  </div>
                                </div>
                                <div class="col" style="padding: 4px;margin-top: 16px;">
                                  <div>
                                    <ul class="nav nav-tabs nav-justified">
                                      <li class="nav-item" style=" cursor: pointer;"><a class="nav-link active"
                                          role="tab" data-toggle="tab" data-target="#tab-Job11">Address</a>
                                      </li>
                                      <li class="nav-item" style=" cursor: pointer;"><a class="nav-link" role="tab"
                                          data-toggle="tab" data-target="#tab-Job12">Notes</a>
                                      </li>
                                      <li class="nav-item" style=" cursor: pointer;"><a class="nav-link" role="tab"
                                          data-toggle="tab" data-target="#tab-Job13">Invoicing</a>
                                      </li>
                                      <li class="nav-item attachmentTabJobPOP" style=" cursor: pointer;">
                                        <a class="nav-link" role="tab" data-toggle="tab" data-target="#tab-Job14">
                                          {{#if attachmentCount}}<span
                                            id="attachment-countJob">{{attachmentCountJob}}</span>{{/if}}
                                          Attachments</a>
                                      </li>
                                      <!-- <li class="nav-item"><a class="nav-link" role="tab" data-toggle="tab" data-target="#tab-Job15">Custom Fields</a></li> -->
                                      <li class="nav-item" style=" cursor: pointer;"><a class="nav-link" role="tab"
                                          data-toggle="tab" data-target="#tab-Job16">Tax</a>
                                      </li>
                                    </ul>
                                    <div class="tab-content">
                                      <div class="tab-pane active border rounded-0" role="tabpanel" id="tab-Job11"
                                        style="border-color: #ededed #00a3d3 #00a3d3 #00a3d3 !important;">
                                        <div class="row no-gutters flex-column" style="margin: 12px;">
                                          <div class="col">
                                            <script>
                                              function myFunctionJobNoPOP() {
                                                const checkBoxJob = document.getElementById("chkJobSameAsShipping2NoPOP");
                                                const billingAddressJob = document.getElementById("jobbillingaddressNoPOP");
                                                if (checkBoxJob.checked === true) {
                                                  billingAddressJob.style.display = "none";
                                                } else {
                                                  billingAddressJob.style.display = "flex";
                                                }
                                              }
                                            </script>
                                            <div class="row no-gutters">
                                              <h4 style="margin: 4px;">
                                                Shipping&nbsp;Address
                                              </h4>
                                            </div>
                                            <div class="row no-gutters">
                                              <div class="col" style="padding: 0;">
                                                <div
                                                  class="form-group d-flex d-sm-flex d-xl-flex flex-column flex-grow-1 align-items-start align-items-sm-start align-items-xl-start"
                                                  style="margin: 4px;">
                                                  <label>Street
                                                    Address</label><textarea class="border rounded flex-grow-1"
                                                    style="width: 100%;height: 116px;" rows="4"
                                                    id="edtJobCustomerShippingAddress"
                                                    name="edtJobCustomerShippingAddress"
                                                    value="{{record.jobshippingaddress}}"></textarea>
                                                </div>
                                              </div>
                                              <div class="col d-xl-flex align-items-xl-start" style="padding: 0;">
                                                <div
                                                  class="row no-gutters d-xl-flex flex-column flex-grow-1 justify-content-xl-start">
                                                  <div class="col d-xl-flex flex-grow-1 align-items-xl-start">
                                                    <div class="form-group flex-grow-1" style="margin: 4px;">
                                                      <label>City
                                                        /
                                                        Town</label><input type="text" class="form-control"
                                                        id="edtJobCustomerShippingCity"
                                                        name="edtJobCustomerShippingCity" value="{{record.jobscity}}">
                                                    </div>
                                                    <div class="form-group flex-grow-1" style="margin: 4px;">
                                                      <label>State
                                                        /
                                                        Region</label><input type="text" class="form-control"
                                                        id="edtJobCustomerShippingState"
                                                        name="edtJobCustomerShippingState" value="{{record.jobsstate}}">
                                                    </div>
                                                  </div>
                                                  <div class="col d-xl-flex align-items-xl-start">
                                                    <div class="form-group flex-grow-1" style="margin: 4px;">
                                                      <label>ZIP
                                                        Code</label><input type="text" class="form-control"
                                                        id="edtJobCustomerShippingZIP" name="edtJobCustomerShippingZIP"
                                                        value="{{record.jobspostalcode}}">
                                                    </div>
                                                    <div
                                                      class="form-group d-xl-flex flex-column flex-grow-1 justify-content-xl-start"
                                                      style="margin: 4px;">
                                                      <label>Country</label><select class="form-control"
                                                        id="sedtJobCountry" name="sedtJobCountry"
                                                        style=" cursor: pointer;">
                                                        {{#each
                                                        item in
                                                        countryList}}
                                                        {{#if
                                                        equals
                                                        item
                                                        record.scountry
                                                        }}
                                                        <option value="{{record.jobscountry}}" selected="">
                                                          {{record.jobscountry}}
                                                        </option>
                                                        {{else}}
                                                        <option value="{{item}}">
                                                          {{item}}
                                                        </option>
                                                        {{/if}}
                                                        {{/each}}
                                                      </select>
                                                    </div>
                                                  </div>
                                                </div>
                                              </div>
                                            </div>
                                          </div>
                                          <style>
                                            .jobbillingaddress {
                                              display: none;
                                            }
                                          </style>

                                          <div class="col">
                                            <div class="row no-gutters" style="margin-top: 12px;">
                                              <div class="col d-xl-flex align-items-start" style="padding: 0;">
                                                <h4 class="flex-grow" style="margin: 4px;">
                                                  Billing Address</h4>
                                                <div class="custom-control custom-switch chkJobaddress"
                                                  style="margin: 8px;">
                                                  <input class="custom-control-input" type="checkbox"
                                                    id="chkJobSameAsShipping2NoPOP" onclick="myFunctionJobNoPOP()"
                                                    style=" cursor: pointer;" checked><label
                                                    class="custom-control-label" for="chkJobSameAsShipping2NoPOP"
                                                    style=" cursor: pointer;">Same
                                                    as
                                                    Shipping</label>
                                                </div>
                                              </div>
                                            </div>
                                            <div class="row no-gutters jobbillingaddressNoPOP"
                                              id="jobbillingaddressNoPOP">
                                              <div class="col" style="padding: 0;">
                                                <div
                                                  class="form-group d-flex d-sm-flex d-xl-flex flex-column flex-grow-1 align-items-start align-items-sm-start align-items-xl-start"
                                                  style="margin: 4px;">
                                                  <label>Street
                                                    Address</label><textarea class="border rounded flex-grow-1"
                                                    style="width: 100%;height: 116px;" rows="4"
                                                    id="edtCustomerBillingAddress" name="edtCustomerBillingAddress"
                                                    value="{{record.billingaddress}}"></textarea>
                                                </div>
                                              </div>
                                              <div class="col d-xl-flex align-items-xl-start" style="padding: 0;">
                                                <div
                                                  class="row no-gutters d-xl-flex flex-column flex-grow-1 justify-content-xl-start">
                                                  <div class="col d-xl-flex align-items-xl-start">
                                                    <div class="form-group flex-grow-1" style="margin: 4px;">
                                                      <label>City
                                                        /
                                                        Town</label><input type="text" class="form-control"
                                                        id="edtJobCustomerBillingCity" name="edtJobCustomerBillingCity"
                                                        value="{{record.bcity}}">
                                                    </div>
                                                    <div class="form-group flex-grow-1" style="margin: 4px;">
                                                      <label>State
                                                        /
                                                        Region</label><input type="text" class="form-control"
                                                        id="edtJobCustomerBillingState"
                                                        name="edtJobCustomerBillingState" value="{{record.jobbstate}}">
                                                    </div>
                                                  </div>
                                                  <div class="col d-xl-flex align-items-xl-start">
                                                    <div class="form-group flex-grow-1" style="margin: 4px;">
                                                      <label>ZIP
                                                        Code</label><input type="text" class="form-control"
                                                        id="edtJobCustomerBillingZIP" name="edtJobCustomerBillingZIP"
                                                        value="{{record.jobbpostalcode}}">
                                                    </div>
                                                    <div class="form-group flex-grow-1" style="margin: 4px;">
                                                      <label>Country</label><select class="form-control"
                                                        id="sJobedtCountry" name="sJobedtCountry"
                                                        style=" cursor: pointer;">
                                                        {{#each
                                                        item in
                                                        countryList}}
                                                        {{#if
                                                        equals
                                                        item
                                                        record.scountry
                                                        }}
                                                        <option value="{{record.jobscountry}}" selected="">
                                                          {{record.jobscountry}}
                                                        </option>
                                                        {{else}}
                                                        <option value="{{item}}">
                                                          {{item}}
                                                        </option>
                                                        {{/if}}
                                                        {{/each}}
                                                      </select>
                                                    </div>
                                                  </div>
                                                </div>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                      <div class="tab-pane border rounded-0" role="tabpanel" id="tab-Job12"
                                        style="border-color: #ededed #00a3d3 #00a3d3 #00a3d3 !important;">
                                        <div class="row no-gutters" style="margin: 12px;">
                                          <div class="col">
                                            <div
                                              class="form-group d-flex d-sm-flex d-xl-flex flex-column flex-grow-1 align-items-start align-items-sm-start align-items-xl-start"
                                              style="margin: 4px;">
                                              <label>Notes</label>
                                              <textarea class="border rounded flex-grow-1"
                                                style="width: 100%;height: 116px;" rows="4" id="txaJobNotes"
                                                name="txaJobNotes">{{record.notes}}</textarea>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                      <div class="tab-pane border rounded-0" role="tabpanel" id="tab-Job13"
                                        style="border-color: #ededed #00a3d3 #00a3d3 #00a3d3 !important;">
                                        <div class="row no-gutters d-xl-flex flex-column justify-content-xl-start"
                                          style="margin: 12px;">
                                          <div class="col d-xl-flex align-items-xl-end">
                                            <div class="form-group d-xl-flex flex-column justify-content-xl-start"
                                              style="margin: 4px;">
                                                {{>vs1___dropdown
                                                        data=record.jobclienttype
                                                        type='search'
                                                        id='sltJobCustomerType'
                                                        name='sltJobCustomerType'
                                                        modalId= 'customerTypePopModal'
                                                        list_template_name='clienttypepopup'
                                                        modal_title='Customer Type'
                                                        innerModal=true
                                                        label = 'Customer Type'
                                                        colNameForValue = 'colTypeName'
                                                        is_editable=true
                                                        noBorder=false
                                                }}
                                            </div>

                                            <div class="form-group d-xl-flex flex-column align-items-xl-start"
                                              style="margin: 4px;"><label class="text-nowrap">Preferred
                                                Payment
                                                Method</label>
                                              <select type="search" class="form-control" id="sltJobPreferredPayment"
                                                name="sltJobPreferredPayment"
                                                style="background-color:rgb(255, 255, 255); cursor: pointer;">
                                              </select>
                                            </div>
                                            <div class="form-group d-xl-flex flex-column justify-content-xl-start"
                                              style="margin: 4px;">
                                                {{>vs1___dropdown
                                                        data=record.scountry
                                                        type='search'
                                                        id='sltJobTerms'
                                                        name='sltJobTerms'
                                                        modalId= 'termPopModal'
                                                        list_template_name='termlistpop'
                                                        modal_title='Terms'
                                                        innerModal=true
                                                        label = 'Terms'
                                                        colNameForValue = 'colName'
                                                        is_editable=true
                                                        noBorder=false
                                                }}
                                            </div>

                                            <div class="form-group d-xl-flex flex-column justify-content-xl-start"
                                              style="margin: 4px;"><label class="text-nowrap">%
                                                Discount</label>
                                              <input type="text" class="form-control pointer"
                                                id="edtJobCustomerCardDiscount" name="edtJobCustomerCardDiscount"
                                                value="{{record.jobdiscount}}">
                                            </div>
                                          </div>
                                          <div class="col d-xl-flex align-items-xl-end" style="display:none!important;">
                                            <div class="form-group d-xl-flex flex-column justify-content-xl-start"
                                              style="margin: 4px;"><label class="text-nowrap">Preferred
                                                Delivery
                                                Method</label>
                                              <select class="form-control" style="width: 260px;"
                                                id="sltJobDeliveryMethod" name="sltJobDeliveryMethod">
                                                {{#each item in
                                                deliveryMethodList}}
                                                {{#if equals item
                                                record.deliverymethod }}
                                                <option value="{{record.jobdeliverymethod}}" selected="">
                                                  {{record.jobdeliverymethod}}
                                                </option>
                                                {{else}}
                                                <option value="{{item}}">
                                                  {{item}}</option>
                                                {{/if}}
                                                {{/each}}
                                              </select>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                      <div class="tab-pane border rounded-0" role="tabpanel" id="tab-Job14"
                                        style="border-color: #ededed #00a3d3 #00a3d3 #00a3d3 !important;">
                                        <div class="row no-gutters" style="margin: 12px;">
                                          <div class="col">

                                            <style>
                                              .file-nameJobPOP span {
                                                width: 100%;
                                                float: left;
                                              }

                                              .uploaded-on {
                                                display: none !important;
                                              }

                                              #file-displayJobPOP .fileIocns i.fa.fa-file {
                                                color: rgb(252, 181, 38);
                                                font-size: 24px;
                                              }

                                              #file-displayJobPOP {
                                                padding: 0;
                                                margin: 0;
                                              }

                                              .uploaded-elementJobPOP {
                                                display: inherit;
                                              }

                                              .uploaded-elementJobPOP {

                                                border: 1px solid rgb(237, 237, 237);
                                                border-top: none;

                                                width: 100%;
                                                display: flex;
                                                align-items: center;
                                                padding: 1rem;
                                              }

                                              #file-displayJobPOP .fileIocns {
                                                background-image: url(img/file_icons-samall.png);
                                                background-repeat: no-repeat;
                                                background-position: 0 -105px;
                                              }

                                              #file-displayJobPOP .fileIocns {
                                                float: left;
                                                margin-right: 10px;
                                              }

                                              .file-nameJobPOP {
                                                float: left;
                                                width: 95%;
                                              }

                                              .uploaded-element-header {
                                                border: 1px solid rgb(237, 237, 237);
                                                border-top: none;
                                                float: left;
                                                width: 100%;
                                                display: flex;
                                                align-items: center;
                                                padding: 10px;
                                                background: #e3e6f0;
                                              }

                                              .uploaded-header {
                                                width: 100%;
                                                text-align: center;
                                              }

                                              .uploaded-elementJobPOP .confirm-actionJobPOP a.confirm-delete-attachmentJobPOP {
                                                padding: 6px 13px 5px;
                                                background-color: rgb(216, 68, 68) !important;
                                                border-color: rgb(197, 112, 119) rgb(169, 29, 29) rgb(169, 29, 29) rgb(197, 112, 119);
                                                color: rgb(255, 255, 255) !important;
                                                text-shadow: 1px 1px 1px rgba(30, 30, 30, 0.15);
                                                line-height: initial;
                                                font-size: 12px;
                                                float: left;
                                              }

                                              button.save-to-libraryJobPOP {
                                                padding: 6px 13px 5px;
                                                border-radius: 4px;
                                                background: linear-gradient(rgb(255, 255, 255), rgb(230, 234, 236));
                                                border: 1px solid rgb(230, 230, 230);
                                                border-color: rgb(230, 230, 230) rgb(179, 179, 179) rgb(179, 179, 179) rgb(230, 230, 230) !important;
                                                color: rgb(204, 0, 0) !important;
                                                font-weight: bold;
                                                margin-left: 10px !important;
                                                font-size: 12px;
                                              }

                                              .uploaded-elementJobPOP {
                                                display: inherit;
                                              }

                                              /* HERE */
                                              #files_viewJobPOP .modal-title {
                                                white-space: nowrap;
                                                overflow: hidden;
                                                text-overflow: ellipsis;
                                                width: 70%;
                                              }

                                              #files_viewJobPOP .modal-title {
                                                color: #333;
                                                font-size: 18px;
                                                font-weight: 700;
                                                text-rendering: optimizelegibility;
                                                padding: 9px 0;
                                                padding-left: 15px;
                                                padding-top: 11px;
                                              }

                                              #files_viewJobPOP .modal-dialog {
                                                width: 750px;
                                                margin: 30px auto;
                                              }

                                              #files_viewJobPOP .modal-header .close {
                                                margin-top: 0;
                                                width: 46px;
                                                height: 46px;
                                                padding: 6px 0 0;
                                                border-left: 1px solid #ddd;
                                                opacity: 1;
                                                margin: 0;
                                              }

                                              #files_viewJobPOP .modal-header {
                                                padding: 0;
                                                display: block;
                                              }

                                              #files_viewJobPOP .modal-body {
                                                background-color: rgb(250, 251, 251);
                                              }

                                              #files_viewJobPOP .image-previewer img {
                                                border: 3px solid #fff;
                                                box-shadow: 2px 2px 8px rgba(0, 0, 0, .2);
                                                width: 100%;
                                              }

                                              .download_buttonJobPOP {
                                                width: 100%;
                                                text-align: center;
                                                margin-top: 20px;
                                              }
                                            </style>

                                            <!-- Start Attachemt -->
                                            <div class="divTable" id="file-displayJobPOP">
                                              <div class="col inboxcol1">
                                                <img src="/icons/nofiles_icon.png" class="">
                                              </div>
                                              <div class="col inboxcol2">
                                                <div>Upload files or add
                                                  files from the file
                                                  library</div>
                                                <p style="color: #ababab;">
                                                  Only users with
                                                  access to your
                                                  company can
                                                  view these files</p>
                                              </div>
                                            </div>

                                            <input type="file" id="attachment-uploadJobPOP" style="display:none"
                                              multiple accept="image/*;capture=camera,.jpg,.gif,.png,.bmp,.tiff,.pdf,.doc,.docx,.xls,.xlsx,.ppt,
                                              .pptx,.odf,.csv,.txt,.rtf,.eml,.msg,.ods,.odt,.keynote,.key,.pages-tef,
                                              .pages,.numbers-tef,.numbers,.zip,.rar,.zipx,.xzip,.7z,image/jpeg,
                                              image/gif,image/png,image/bmp,image/tiff,application/pdf,
                                              application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,
                                              application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,
                                              application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml.presentation,
                                              application/vnd.oasis.opendocument.formula,text/csv,text/plain,text/rtf,message/rfc822,
                                              application/vnd.ms-outlook,application/vnd.oasis.opendocument.spreadsheet,
                                              application/vnd.oasis.opendocument.text,application/x-iwork-keynote-sffkey,
                                              application/vnd.apple.keynote,application/x-iwork-pages-sffpages,
                                              application/vnd.apple.pages,application/x-iwork-numbers-sffnumbers,
                                              application/vnd.apple.numbers,application/zip,application/rar,
                                              application/x-zip-compressed,application/x-zip,application/x-7z-compressed">
                                            <button class="btn btn-primary btnUploadFileJobPOP new_attachment_btnJobPOP"
                                              type="button" style="margin: 4px;"><i class="fa fa-cloud-upload"
                                                style="margin-right: 5px;"></i>Upload</button>
                                            <!-- END Attachments -->
                                          </div>
                                        </div>
                                      </div>
                                      <div class="tab-pane border rounded-0" role="tabpanel" id="tab-Job15"
                                        style="border-color: #ededed #00a3d3 #00a3d3 #00a3d3 !important;">
                                        <div class="row no-gutters" style="margin: 14px;">
                                          <div class="col d-xl-flex align-items-xl-center">
                                            <div class="form-group flex-grow-1"
                                              style="margin: 4px; padding-right :4px;">
                                              <label class="text-nowrap" contenteditable="true">Custom
                                                Field 1</label><input type="text" class="form-control"
                                                id="edtJobCustomeField1" name="edtJobCustomeField1"
                                                value="{{record.jobcustfield1}}">
                                            </div>
                                            <div class="form-group flex-grow-1" style="margin: 4px;"><label
                                                class="text-nowrap" contenteditable="true">Custom
                                                Field 2</label><input type="text" class="form-control"
                                                id="edtJobCustomeField2" name="edtJobCustomeField2"
                                                value="{{record.jobcustfield2}}">
                                            </div>
                                            <div class="form-group flex-grow-1" style="margin: 4px;padding-left :4px;">
                                              <label class="text-nowrap" contenteditable="true">Custom
                                                Field 3</label><input type="text" class="form-control"
                                                id="edtJobCustomeField3" name="edtJobCustomeField3"
                                                value="{{record.jobcustfield3}}">
                                            </div>
                                            <div class="form-group flex-grow-1" style="margin: 4px;padding-left:4px;">
                                              <label class="text-nowrap" contenteditable="true">Custom
                                                Field 4</label><input type="text" class="form-control"
                                                id="edtJobCustomeField4" name="edtJobCustomeField4"
                                                value="{{record.jobcustfield4}}">
                                            </div>
                                          </div>
                                        </div>
                                      </div>

                                      <!-- View File Attachemt -->
                                      <div id="files_viewJobPOP" class="modal fade" role="dialog">
                                        <div class="modal-dialog">
                                          <!-- Modal content-->
                                          <div class="modal-content">
                                            <div class="modal-header">
                                              <button type="button" class="close" data-dismiss="modal">x</button>
                                              <h4 class="modal-title">
                                                {{uploadedFileJob.name}}
                                              </h4>
                                            </div>
                                            <div class="modal-body">
                                              {{#if
                                              uploadedFileJob.image}}
                                              <div class="image-previewer">
                                                <img src="{{uploadedFileJob.link}}">
                                              </div>
                                              {{else}}
                                              <div class=" default-file {{uploadedFileJob.class}}">

                                              </div>
                                              {{/if}}
                                              <div class="download_button">
                                                <a class="new_create_btn btn btn-primary" id="downloadButtonJobPOP"
                                                  download="{{uploadedFileJob.name}}"
                                                  href="{{uploadedFileJob.link}}">Download</a>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                      <!-- End View File attachment -->

                                      <div class="tab-pane border rounded-0" role="tabpanel" id="tab-Job16"
                                        style="border-color: #ededed #00a3d3 #00a3d3 #00a3d3 !important;">
                                        <div class="row no-gutters d-xl-flex flex-column justify-content-xl-start"
                                          style="margin: 12px;">
                                          <div class="col">
                                            <div class="custom-control custom-switch" style="margin: 4px;"><input
                                                class="custom-control-input chkJobTaxExempt" type="checkbox"
                                                id="formCheckJob-2" checked><label class="custom-control-label"
                                                for="formCheckJob-2">This
                                                customer is tax
                                                exempt</label></div>
                                          </div>
                                          <div class="col d-xl-flex align-items-xl-end">
                                            <div id="autoUpdateJob" style="display: none;">
                                              <div
                                                class="form-group d-flex d-sm-flex d-xl-flex flex-column flex-grow-1 align-items-start align-items-sm-start align-items-xl-start"
                                                style="margin: 4px;">
                                                <label class="text-nowrap">Tax
                                                  Code</label>
                                                <select type="search" class="form-control"
                                                  style="width: 260px; background-color:rgb(255, 255, 255); cursor: pointer;"
                                                  id="sltJobTaxCode" name="sltJobTaxCode">
                                                </select>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>

                              </div>

                              <!-- < End -->
                            </div>
                          </div>
                          <form></form>
                          <div class="modal-footer" style="background-color: #ededed;">
                            <div class="d-xl-flex justify-content-between align-items-xl-center"
                              style="margin: 16px 0 0 0; width:100%;">
                              <button class="btn btn-success btnSaveJob" type="button" style="min-width: 90px;"><i
                                  class="fa fa-save" style="margin: 4px;"></i>Save</button>
                              <button class="btn btn-secondary" type="button" data-dismiss="modal"
                                style="min-width: 90px;"><i class="fa fa-close" style="margin: 4px;"></i>Close</button>
                            </div>
                          </div>
                        </div>
                      </div>

                      <!-- Start Help Video Modal -->
                      <div class="modal fade" role="dialog" tabindex="-1" id="helpModal2">
                        <div class="modal-dialog" role="document" style="max-width: 670px!important;">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h4 class="title-header">New Job</h4>
                              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                  aria-hidden="true">�</span></button>
                            </div>
                            <div class="modal-body">
                              <video preload="none" id="myVideo" width="640" height="360" controls="" name="media"
                                style="border: solid 5px #999999f0; height: auto; outline: none;">
                                <source src="https://erphelpes.com/vs1videos/newjob.mp4" type="video/mp4">
                              </video>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- End Help Video Modal -->

                    </div>
                    <!-- New Job Pop Up Ends Here  -->
                    {{/if}}
                  </div>
                  {{/if}}
                  <div class="tab-pane border rounded-0 tab-1" role="tabpanel" id="tab-1"
                    style="border-color: #ededed #00a3d3 #00a3d3 #00a3d3 !important;">
                    {{#if equals currentTab 'tab-1'}}
                    <div class="row d-xl-flex flex-row justify-content-xl-center">
                      <div class="col float-left flex-grow-1 mb-4" style="margin-bottom: 0! important;">
                        <div class="btn-group float-left" style="margin: 14px; margin-bottom: 0;">
                          <button class="btn btn-primary btnRefreshTransaction" type="button"
                            style="background-color: #00A3D3; border-color: #00A3D3;"><i class="la la-lightbulb-o"
                              style="background-color: #00A3D3; border-color: #00A3D3;"></i>Refresh</button>
                        </div>
                      </div>
<!--                      <div class="col">-->
<!--                        <button class="btn btn-primary float-right printConfirmTransaction" type="button"-->
<!--                          style="margin:14px; background-color: #00A3D3; border-color: #00A3D3;"><i class="fa fa-print"-->
<!--                            style="padding-right: 5px; background-color: #00A3D3; border-color: #00A3D3;"></i>Print</button>-->
<!--                        <button class="btn btn-primary export float-right" type="button"-->
<!--                          style="margin: 14px; background-color: #00A3D3; border-color: #00A3D3;"-->
<!--                          id="exportbtnTransaction" name="exportbtn"><i class="fas fa-file-export"-->
<!--                            style="padding-right: 5px; background-color: #00A3D3; border-color: #00A3D3;"></i>Export</button>-->
<!--                      </div>-->
                    </div>
                    <div class="d-flex justify-content-left" style="margin-left: 14px;">
                      <div style="width: 164px;">
                        {{> toggle_button className="chkGlobalSettings" id="customer_transctionList_appointments_toggle"
                        width="131px" for="customer_transctionList_appointments_toggle" displayName="Appointments" isChecked=checkedAppointments}}
                      </div>
                      <div style="width: 154px;">
                        {{> toggle_button className="chkGlobalSettings" id="customer_transctionList_sales_orders_toggle"
                        width="131px" for="customer_transctionList_sales_orders_toggle" displayName="Sales" isChecked=checkedSalesOrders}}
                      </div>
                    </div>
                    <div class="row rowB mt-2" style="margin: 14px; margin-top: 0">
                      <div class="card-body rounded" style="padding: 0;">
                        <!-- End -->
                        {{#if checkedAppointments}}
<!--                          {{> non_transactional_list tablename="tblAppointmentsByCustomer" customerId=record.id}}-->
                            <div class="col d-xl-flex justify-content-xl-end align-items-xl-start">
                                {{> export_import_print_display_button tablename="tblAppointmentsByCustomer"}}
                            </div>
                            {{>datatablelist
                                    tablename="tblAppointmentsByCustomer"
                                    tableclass="tblAppointmentsByCustomer"
                                    apiName= apiFunction_AppointmentsByCustomer
                                    indexeddbname = 'TAppointmentList'
                                    tableheaderrecords = tableheaderrecords_AppointmentsByCustomer
                                    exportfilename = 'Appointments By Customer List'
                                    istransaction = true
                                    apiParams= apiParams_AppointmentsByCustomer
                                    datahandler = datahandler_AppointmentsByCustomer
                                    service=service_AppointmentsByCustomer
                                    lowercaseDataName='tappointmentlist'
                                    exIndexDBName = 'tappointmentlist'
                                    exdatahandler = exDataHandler_AppointmentsByCustomer
                                    searchAPI = searchAPI_AppointmentsByCustomer
                            }}
                        {{/if}}
                        {{#if checkedSales}}
                        <div class="mt-4">
<!--                          {{> non_transactional_list tablename="tblSalesListByCustomer" customerName=record.company}}-->
<!--                            <div class="col d-xl-flex justify-content-xl-end align-items-xl-start">-->
<!--                                {{> export_import_print_display_button tablename="tblSalesListByCustomer"}}-->
<!--                            </div>-->
                            <!--{{>datatablelist
                                    tablename="tblSalesListByCustomer"
                                    tableclass="tblSalesListByCustomer"
                                    apiName= apiSalesFunction
                                    indexeddbname = 'TSupplierVS1List'
                                    tableheaderrecords = tableSalesHeaderRecords
                                    exportfilename = 'Setup Supplier List'
                                    istransaction = false
                                    apiParams= apiParams
                                    datahandler = datahandler
                                    service=service
                                    lowercaseDataName='tsuppliervs1list'
                                    exIndexDBName = 'tsuppliervs1list'
                                    exdatahandler = exDataHandler
                                    searchAPI = searchAPI
                            }}-->
                        </div>
                        {{/if}}
                      </div>
                    </div>
                    {{/if}}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    {{/if}}
  </div>

  <div class="modal fade" role="dialog" tabindex="-1" id="referenceLetterModal">
    <div class="modal-dialog modal-md modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header d-flex align-items-center">
          <h5 class="modal-title" id="chooseLetterLabel">Choose a reference letter</h5>
          <button class="btn btn-primary btnAddLetter" type="button">
            <i class="la la-lightbulb-o" style="padding-right: 5px;"></i>
            Add a template
          </button>
        </div>
        <div class="modal-body p-3" style="display: flex; flex-direction: column; align-items: stretch; gap: 20px">
          {{#each correspondence in correspondences}}
          <div>
            <input
              type="radio"
              name="refTemp"
              value="{{correspondence.Ref_Type}}"
              id="{{correspondence.Ref_Type}}"
              data-subject="{{correspondence.ReferenceTxt}}"
              data-memo="{{correspondence.MessageAsString}}">
            <label for="{{correspondence.label}}">
              {{correspondence.Ref_Type}}
            </label>
          </div>
          {{/each}}
        </div>
        <div class="modal-footer">
          <div class="d-flex align-items-center justify-content-end">
            {{> vs1_button
              color='success'
              classes='float-right btnSaveLetterTemp'
              type='button'
              id="save-correspondence"
              iconName='save'
              title='Save'
            }}
            {{> vs1_button
              color='secondary'
              classes='float-right btnSaveLetterTemp'
              type='button'
              id="save-correspondence"
              iconName='close'
              title='Close'
            }}
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" id="addLetterTemplateModal" role="dialog" tabindex="-1">
    <div class="modal-dialog modal-md modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="addLetterTemplateLabel">Create a Letter Template</h5>
        </div>
        <div class="modal-body p-3" style="display: flex; flex-direction: column; align-items: stretch; gap: 20px">
          <input type="text" class="p-2" style="width: 100%; border-radius: 5px; border: 1px solid #d1d3ed"
            id="edtTemplateLbl" placeholder="Reference Letter Label" />
          <input type="text" class="p-2" style="width: 100%; border-radius: 5px; border: 1px solid #d1d3ed"
            id="edtTemplateSubject" placeholder="Subject" />
          <textarea type="text" class="p-2"
            style="width: 100%; height: 200px; resize: none; border-radius: 5px; border: 1px solid #d1d3ed"
            id="edtTemplateContent" placeholder="Enter Message Here"></textarea>
        </div>
        <div class="modal-footer">
          <div class="d-flex align-items-center justify-content-end">
            <button class="btn btn-success float-right btnSaveLetterTemp" id="save-correspondence" type="button"
              style="margin: 12px;"><i class="fa fa-save" style="margin-right: 5px;"></i>Save</button>
            <button type="button" class="btn btn-secondary" data-dismiss="modal"> <i class="fa fa-close"
                style="margin-right: 5px;"></i>Close</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- <div class="modal fade" role="dialog" tabindex="-1" id="paymentMethodModal">
    {{> paymentmethodpop}}
  </div>

  <div class="modal fade" role="dialog" tabindex="-1" id="newPaymentMethodModal">
    {{> newpaymentmethodpop}}
  </div>

  <div class="modal fade" role="dialog" tabindex="-1" id="termsListModal">
    {{> termlistpop}}
  </div> -->

  <!-- <div class="modal fade" role="dialog" tabindex="-1" id="newTermsModal">
    {{> newtermspop}}
  </div> -->

  <!-- <div class="modal fade" role="dialog" tabindex="-1" id="clienttypeListModal">
    {{> clienttypepopup}}
  </div>

  <div class="modal fade" role="dialog" tabindex="-1" id="taxRateListModal">
    {{> taxratelistpop}}
  </div>
  <div class="modal fade" role="dialog" tabindex="-1" id="newTaxRateModal">
    {{> newtaxratepop}}
  </div>
  <div class="modal fade" role="dialog" tabindex="-1" id="statusPopModal">
    {{> statuspop}}
  </div>
  <div class="modal fade" role="dialog" tabindex="-1" id="newStatusPopModal">
    {{> newstatuspop}}
  </div>

  <div class="modal fade" role="dialog" tabindex="-1" id="customerTitlePopModal">
    {{> title_list_pop}}
  </div> -->

  {{> taskDetailModal}}
  <!-- {{> frmappointmentpop}} temp commented out because of using all_transaction_modal-->
  {{> newTaskModal}}


  <div class="modal fade customerListCrmModal" role="dialog" tabindex="-1" id="customerListCrmModal">
    <div class="modal-dialog modal-xl modal-dialog-scrollable customerListModalInner" role="document"
      style="max-width: 90vw;">
      <div class="modal-content customerListContent">
        <div class="modal-header">
          <h4>Contact List</h4><button type="button" class="close checkclose" data-dismiss="modal"
            aria-label="Close"><span aria-hidden="true">×</span></button>
        </div>
        <div class="modal-body mainCustomerModalBody" style="padding: 0px; overflow-x: hidden;">
          <input type="hidden" style="width: 100%; display:none;" id="customerSelectLineID" name="customerSelectLineID"
            readonly>
          <div class="row">
            <div class="col-12 contactlistcol">
              {{> contactlistpop}}
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-light checkclose" data-dismiss="modal" type="button">Close</button>
        </div>
      </div>
    </div>
  </div>

  {{> projectListPop}}

  <input type="hidden" id="assignedID" />
  <input type="hidden" id="contactID" />
  <input type="hidden" id="contactType" />
  <script>
    modalDraggable();
  </script>
</template>
